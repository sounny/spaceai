(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();const Ln=function(t,e,n){let o=Promise.resolve();function s(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return o.then(l=>{for(const a of l||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/let Mn,Dn;function Un(){return{geminiUrl:Mn,vertexUrl:Dn}}function qn(t,e,n,o){var s,l;if(!(t!=null&&t.baseUrl)){const a=Un();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class F{}function E(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function r(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const c=a.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[c])){const d=t[c];if(Array.isArray(n))for(let u=0;u<d.length;u++){const p=d[u];r(p,e.slice(l+1),n[u])}else for(const u of d)r(u,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const c=a.slice(0,-3);c in t||(t[c]=[{}]);const d=t[c];r(d[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],s=t[o];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function i(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in t){const a=t[l];return Array.isArray(a)?a.map(c=>i(c,e.slice(o+1),n)):n}else return n}else t=t[s]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Gn(t,e){for(const[n,o]of Object.entries(e)){const s=n.split("."),l=o.split("."),a=new Set;let c=-1;for(let d=0;d<s.length;d++)if(s[d]==="*"){c=d;break}if(c!==-1&&l.length>c)for(let d=c;d<l.length;d++){const u=l[d];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&a.add(u)}fe(t,s,l,0,a)}}function fe(t,e,n,o,s){if(o>=e.length||typeof t!="object"||t===null)return;const l=e[o];if(l.endsWith("[]")){const a=l.slice(0,-2),c=t;if(a in c&&Array.isArray(c[a]))for(const d of c[a])fe(d,e,n,o+1,s)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,c=Object.keys(a).filter(u=>!u.startsWith("_")&&!s.has(u)),d={};for(const u of c)d[u]=a[u];for(const[u,p]of Object.entries(d)){const f=[];for(const h of n.slice(o))h==="*"?f.push(u):f.push(h);r(a,f,p)}for(const u of c)delete a[u]}}else{const a=t;l in a&&fe(a[l],e,n,o+1,s)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function _e(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function jn(t){const e={},n=i(t,["operationName"]);n!=null&&r(e,["operationName"],n);const o=i(t,["resourceName"]);return o!=null&&r(e,["_url","resourceName"],o),e}function Hn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],Bn(a)),e}function Fn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],Vn(a)),e}function Bn(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Jn(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function Vn(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>$n(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function Jn(t){const e={},n=i(t,["video"]);return n!=null&&r(e,["video"],Xn(n)),e}function $n(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],Qn(n)),e}function Yn(t){const e={},n=i(t,["operationName"]);return n!=null&&r(e,["_url","operationName"],n),e}function Kn(t){const e={},n=i(t,["operationName"]);return n!=null&&r(e,["_url","operationName"],n),e}function Wn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],zn(a)),e}function zn(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&r(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function sn(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],Zn(a)),e}function Zn(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&r(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function Xn(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&r(e,["videoBytes"],_e(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function Qn(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],_e(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var Pe;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Pe||(Pe={}));var ke;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ke||(ke={}));var Le;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Le||(Le={}));var L;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(L||(L={}));var Me;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Me||(Me={}));var De;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(De||(De={}));var Ue;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ue||(Ue={}));var qe;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(qe||(qe={}));var Ge;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ge||(Ge={}));var je;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(je||(je={}));var He;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(He||(He={}));var Fe;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Fe||(Fe={}));var Be;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Be||(Be={}));var Ve;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Ve||(Ve={}));var Je;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Je||(Je={}));var $e;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($e||($e={}));var Ye;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Ye||(Ye={}));var Ke;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ke||(Ke={}));var ie;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ie||(ie={}));var We;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(We||(We={}));var ze;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ze||(ze={}));var Ze;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ze||(Ze={}));var he;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(he||(he={}));var Xe;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Xe||(Xe={}));var Qe;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Qe||(Qe={}));var et;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(et||(et={}));var tt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(tt||(tt={}));var nt;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(nt||(nt={}));var ot;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ot||(ot={}));var it;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(it||(it={}));var st;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(st||(st={}));var rt;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rt||(rt={}));var lt;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lt||(lt={}));var at;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(at||(at={}));var ct;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ct||(ct={}));var ut;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ut||(ut={}));var dt;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(dt||(dt={}));var pt;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(pt||(pt={}));var ft;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ft||(ft={}));var ht;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ht||(ht={}));var mt;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(mt||(mt={}));var gt;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(gt||(gt={}));var vt;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(vt||(vt={}));var yt;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(yt||(yt={}));var bt;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bt||(bt={}));var Et;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Et||(Et={}));var wt;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wt||(wt={}));var _t;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_t||(_t={}));var At;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(At||(At={}));var It;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(It||(It={}));var St;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(St||(St={}));var Tt;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Tt||(Tt={}));var $;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})($||($={}));class me{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Q{get text(){var e,n,o,s,l,a,c,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",p=!1;const f=[];for(const h of(d=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[m,y]of Object.entries(h))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(y!==null||y!==void 0)&&f.push(m);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;p=!0,u+=h.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?u:void 0}get data(){var e,n,o,s,l,a,c,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const p=[];for(const f of(d=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&d!==void 0?d:[]){for(const[h,m]of Object.entries(f))h!=="inlineData"&&(m!==null||m!==void 0)&&p.push(h);f.inlineData&&typeof f.inlineData.data=="string"&&(u+=atob(f.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,o,s,l,a,c,d;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(d=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,o,s,l,a,c,d,u;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(d=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((p==null?void 0:p.length)!==0)return(u=p==null?void 0:p[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,o,s,l,a,c,d,u;if(((s=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(d=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||d===void 0?void 0:d.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((p==null?void 0:p.length)!==0)return(u=p==null?void 0:p[0])===null||u===void 0?void 0:u.output}}class xt{}class Ct{}class eo{}class to{}class no{}class oo{}class Ot{}class Rt{}class Nt{}class io{}class se{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new se;let s;const l=e;return n?s=Fn(l):s=Hn(l),Object.assign(o,s),o}}class Pt{}class kt{}class Lt{}class so{}class ro{}class lo{}class Ae{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Ae,s=Wn(e);return Object.assign(o,s),o}}class ao{}class co{}class uo{}class Mt{}class po{get text(){var e,n,o;let s="",l=!1;const a=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[d,u]of Object.entries(c))d!=="text"&&d!=="thought"&&u!==null&&a.push(d);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;l=!0,s+=c.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,n,o;let s="";const l=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(a))c!=="inlineData"&&d!==null&&l.push(c);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class fo{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ie{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Ie,s=sn(e);return Object.assign(o,s),o}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function C(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function rn(t,e){const n=C(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ln(t){return Array.isArray(t)?t.map(e=>re(e)):[re(t)]}function re(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function an(t){const e=re(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cn(t){const e=re(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dt(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function un(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Dt(e)):[Dt(t)]}function ge(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ut(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function qt(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function D(t){if(t==null)throw new Error("ContentUnion is required");return ge(t)?t:{role:"user",parts:un(t)}}function Se(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=D(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=D(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>D(n)):[D(e)]}function U(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Ut(t)||qt(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[D(t)]}const e=[],n=[],o=ge(t[0]);for(const s of t){const l=ge(s);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(Ut(s)||qt(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return o||e.push({role:"user",parts:un(n)}),e}function ho(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(L).includes(n[0].toUpperCase())?n[0].toUpperCase():L.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(L).includes(o.toUpperCase())?o.toUpperCase():L.TYPE_UNSPECIFIED})}}function Y(t){const e={},n=["items"],o=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&ho(t.type,e);for(const[a,c]of Object.entries(t))if(c!=null)if(a=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(L).includes(c.toUpperCase())?c.toUpperCase():L.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Y(c);else if(o.includes(a)){const d=[];for(const u of c){if(u.type=="null"){e.nullable=!0;continue}d.push(Y(u))}e[a]=d}else if(s.includes(a)){const d={};for(const[u,p]of Object.entries(c))d[u]=Y(p);e[a]=d}else{if(a==="additionalProperties")continue;e[a]=c}return e}function Te(t){return Y(t)}function xe(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ce(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function z(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Y(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Y(e.response));return t}function Z(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function mo(t,e,n,o=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function B(t,e){if(typeof e!="string")throw new Error("name must be a string");return mo(t,e,"cachedContents")}function dn(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function V(t){return _e(t)}function go(t){return t!=null&&typeof t=="object"&&"name"in t}function vo(t){return t!=null&&typeof t=="object"&&"video"in t}function yo(t){return t!=null&&typeof t=="object"&&"uri"in t}function pn(t){var e;let n;if(go(t)&&(n=t.name),!(yo(t)&&(n=t.uri,n===void 0))&&!(vo(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function fn(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function hn(t){for(const e of["models","tunedModels","publisherModels"])if(bo(t,e))return t[e];return[]}function bo(t,e){return t!==null&&typeof t=="object"&&e in t}function Eo(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function wo(t,e={}){const n=[],o=new Set;for(const s of t){const l=s.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=Eo(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function mn(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function _o(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gn(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(const l of o){if(typeof l!="object"||l===null)continue;const a=l.response;if(!(typeof a!="object"||a===null)&&a.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function X(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function vn(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Ao(t){const e={},n=i(t,["responsesFile"]);n!=null&&r(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ei(a))),r(e,["inlinedResponses"],l)}const s=i(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["inlinedEmbedContentResponses"],l)}return e}function Io(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigqueryDestination","outputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function So(t){const e={},n=i(t,["format"]);n!=null&&r(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsDestination","outputUriPrefix"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigqueryDestination","outputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ne(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["metadata","state"]);s!=null&&r(e,["state"],vn(s));const l=i(t,["metadata","createTime"]);l!=null&&r(e,["createTime"],l);const a=i(t,["metadata","endTime"]);a!=null&&r(e,["endTime"],a);const c=i(t,["metadata","updateTime"]);c!=null&&r(e,["updateTime"],c);const d=i(t,["metadata","model"]);d!=null&&r(e,["model"],d);const u=i(t,["metadata","output"]);return u!=null&&r(e,["dest"],Ao(gn(u))),e}function ve(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["state"]);s!=null&&r(e,["state"],vn(s));const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["createTime"]);a!=null&&r(e,["createTime"],a);const c=i(t,["startTime"]);c!=null&&r(e,["startTime"],c);const d=i(t,["endTime"]);d!=null&&r(e,["endTime"],d);const u=i(t,["updateTime"]);u!=null&&r(e,["updateTime"],u);const p=i(t,["model"]);p!=null&&r(e,["model"],p);const f=i(t,["inputConfig"]);f!=null&&r(e,["src"],To(f));const h=i(t,["outputConfig"]);h!=null&&r(e,["dest"],Io(gn(h)));const m=i(t,["completionStats"]);return m!=null&&r(e,["completionStats"],m),e}function To(t){const e={},n=i(t,["instancesFormat"]);n!=null&&r(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&r(e,["gcsUri"],o);const s=i(t,["bigquerySource","inputUri"]);return s!=null&&r(e,["bigqueryUri"],s),e}function xo(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&r(n,["fileName"],o);const s=i(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Qo(t,a))),r(n,["requests","requests"],l)}return n}function Co(t){const e={},n=i(t,["format"]);n!=null&&r(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&r(e,["gcsSource","uris"],o);const s=i(t,["bigqueryUri"]);if(s!=null&&r(e,["bigquerySource","inputUri"],s),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Oo(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ro(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],X(t,o)),n}function No(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],X(t,o)),n}function Po(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],ko(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["avgLogprobs"]);a!=null&&r(e,["avgLogprobs"],a);const c=i(t,["groundingMetadata"]);c!=null&&r(e,["groundingMetadata"],c);const d=i(t,["index"]);d!=null&&r(e,["index"],d);const u=i(t,["logprobsResult"]);u!=null&&r(e,["logprobsResult"],u);const p=i(t,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>m)),r(e,["safetyRatings"],h)}const f=i(t,["urlContextMetadata"]);return f!=null&&r(e,["urlContextMetadata"],f),e}function ko(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),r(e,["citations"],o)}return e}function yn(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>li(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Lo(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&r(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Mo(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["dest"]);return e!==void 0&&s!=null&&r(e,["outputConfig"],So(_o(s))),n}function Gt(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["src"]);s!=null&&r(n,["batch","inputConfig"],xo(t,mn(t,s)));const l=i(e,["config"]);return l!=null&&Lo(l,n),n}function Do(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],C(t,o));const s=i(e,["src"]);s!=null&&r(n,["inputConfig"],Co(mn(t,s)));const l=i(e,["config"]);return l!=null&&Mo(l,n),n}function Uo(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&r(e,["batch","displayName"],o),n}function qo(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["src"]);s!=null&&r(n,["batch","inputConfig"],Jo(t,s));const l=i(e,["config"]);return l!=null&&Uo(l,n),n}function Go(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],X(t,o)),n}function jo(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],X(t,o)),n}function Ho(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],l),e}function Fo(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);return l!=null&&r(e,["error"],l),e}function Bo(t,e){const n={},o=i(e,["contents"]);if(o!=null){let l=Se(t,o);Array.isArray(l)&&(l=l.map(a=>a)),r(n,["requests[]","request","content"],l)}const s=i(e,["config"]);return s!=null&&(r(n,["_self"],Vo(s,n)),Gn(n,{"requests[].*":"requests[].request.*"})),n}function Vo(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Jo(t,e){const n={},o=i(e,["fileName"]);o!=null&&r(n,["file_name"],o);const s=i(e,["inlinedRequests"]);return s!=null&&r(n,["requests"],Bo(t,s)),n}function $o(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Yo(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],yn(D(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const c=i(e,["topK"]);c!=null&&r(o,["topK"],c);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const u=i(e,["maxOutputTokens"]);u!=null&&r(o,["maxOutputTokens"],u);const p=i(e,["stopSequences"]);p!=null&&r(o,["stopSequences"],p);const f=i(e,["responseLogprobs"]);f!=null&&r(o,["responseLogprobs"],f);const h=i(e,["logprobs"]);h!=null&&r(o,["logprobs"],h);const m=i(e,["presencePenalty"]);m!=null&&r(o,["presencePenalty"],m);const y=i(e,["frequencyPenalty"]);y!=null&&r(o,["frequencyPenalty"],y);const b=i(e,["seed"]);b!=null&&r(o,["seed"],b);const g=i(e,["responseMimeType"]);g!=null&&r(o,["responseMimeType"],g);const v=i(e,["responseSchema"]);v!=null&&r(o,["responseSchema"],Te(v));const w=i(e,["responseJsonSchema"]);if(w!=null&&r(o,["responseJsonSchema"],w),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=i(e,["safetySettings"]);if(n!==void 0&&_!=null){let N=_;Array.isArray(N)&&(N=N.map(G=>ai(G))),r(n,["safetySettings"],N)}const A=i(e,["tools"]);if(n!==void 0&&A!=null){let N=Z(A);Array.isArray(N)&&(N=N.map(G=>ci(z(G)))),r(n,["tools"],N)}const S=i(e,["toolConfig"]);if(n!==void 0&&S!=null&&r(n,["toolConfig"],S),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=i(e,["cachedContent"]);n!==void 0&&T!=null&&r(n,["cachedContent"],B(t,T));const x=i(e,["responseModalities"]);x!=null&&r(o,["responseModalities"],x);const M=i(e,["mediaResolution"]);M!=null&&r(o,["mediaResolution"],M);const I=i(e,["speechConfig"]);if(I!=null&&r(o,["speechConfig"],xe(I)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=i(e,["thinkingConfig"]);O!=null&&r(o,["thinkingConfig"],O);const k=i(e,["imageConfig"]);return k!=null&&r(o,["imageConfig"],k),o}function Ko(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>Po(u))),r(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const c=i(t,["usageMetadata"]);return c!=null&&r(e,["usageMetadata"],c),e}function Wo(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],X(t,o)),n}function zo(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],X(t,o)),n}function Zo(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function Xo(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function Qo(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["request","model"],C(t,o));const s=i(e,["contents"]);if(s!=null){let c=U(s);Array.isArray(c)&&(c=c.map(d=>yn(d))),r(n,["request","contents"],c)}const l=i(e,["metadata"]);l!=null&&r(n,["metadata"],l);const a=i(e,["config"]);return a!=null&&r(n,["request","generationConfig"],Yo(t,a,i(n,["request"],{}))),n}function ei(t){const e={},n=i(t,["response"]);n!=null&&r(e,["response"],Ko(n));const o=i(t,["error"]);return o!=null&&r(e,["error"],o),e}function ti(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);if(e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ni(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);e!==void 0&&s!=null&&r(e,["_query","pageToken"],s);const l=i(t,["filter"]);return e!==void 0&&l!=null&&r(e,["_query","filter"],l),n}function oi(t){const e={},n=i(t,["config"]);return n!=null&&ti(n,e),e}function ii(t){const e={},n=i(t,["config"]);return n!=null&&ni(n,e),e}function si(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>ne(a))),r(e,["batchJobs"],l)}return e}function ri(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>ve(a))),r(e,["batchJobs"],l)}return e}function li(t){const e={},n=i(t,["functionCall"]);n!=null&&r(e,["functionCall"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],$o(l));const a=i(t,["functionResponse"]);a!=null&&r(e,["functionResponse"],a);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Oo(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const u=i(t,["thought"]);u!=null&&r(e,["thought"],u);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const f=i(t,["videoMetadata"]);return f!=null&&r(e,["videoMetadata"],f),e}function ai(t){const e={},n=i(t,["category"]);if(n!=null&&r(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function ci(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(f=>f)),r(e,["functionDeclarations"],p)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=i(t,["googleMaps"]);c!=null&&r(e,["googleMaps"],Zo(c));const d=i(t,["googleSearch"]);d!=null&&r(e,["googleSearch"],Xo(d));const u=i(t,["urlContext"]);return u!=null&&r(e,["urlContext"],u),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/var H;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(H||(H={}));class J{constructor(e,n,o,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,s)}init(e,n,o){var s,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ui extends F{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new J(H.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Gt(this.apiClient,e),o=n._url,s=E("{model}:batchGenerateContent",o),l=n.batch.inputConfig.requests,a=l.requests,c=[];for(const d of a){const u=Object.assign({},d);if(u.systemInstruction){const p=u.systemInstruction;delete u.systemInstruction;const f=u.request;f.systemInstruction=p,u.request=f}c.push(u)}return l.requests=c,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},s=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${s}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${s}`;else if(a)o.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Do(this.apiClient,e);return c=E("batchPredictionJobs",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>ve(p))}else{const u=Gt(this.apiClient,e);return c=E("{model}:batchGenerateContent",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>ne(p))}}async createEmbeddingsInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qo(this.apiClient,e);return l=E("{model}:asyncBatchEmbedContent",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>ne(d))}}async get(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=zo(this.apiClient,e);return c=E("batchPredictionJobs/{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>ve(p))}else{const u=Wo(this.apiClient,e);return c=E("batches/{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>ne(p))}}async cancel(e){var n,o,s,l;let a="",c={};if(this.apiClient.isVertexAI()){const d=No(this.apiClient,e);a=E("batchPredictionJobs/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=Ro(this.apiClient,e);a=E("batches/{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=ii(e);return c=E("batchPredictionJobs",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=ri(p),h=new Mt;return Object.assign(h,f),h})}else{const u=oi(e);return c=E("batches",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=si(p),h=new Mt;return Object.assign(h,f),h})}}async delete(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=jo(this.apiClient,e);return c=E("batchPredictionJobs/{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>Fo(p))}else{const u=Go(this.apiClient,e);return c=E("batches/{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>Ho(p))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function di(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function jt(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Pi(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function pi(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let p=U(a);Array.isArray(p)&&(p=p.map(f=>jt(f))),r(e,["contents"],p)}const c=i(t,["systemInstruction"]);e!==void 0&&c!=null&&r(e,["systemInstruction"],jt(D(c)));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(f=>ki(f))),r(e,["tools"],p)}const u=i(t,["toolConfig"]);if(e!==void 0&&u!=null&&r(e,["toolConfig"],u),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function fi(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);e!==void 0&&s!=null&&r(e,["expireTime"],s);const l=i(t,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let f=U(a);Array.isArray(f)&&(f=f.map(h=>h)),r(e,["contents"],f)}const c=i(t,["systemInstruction"]);e!==void 0&&c!=null&&r(e,["systemInstruction"],D(c));const d=i(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(h=>Li(h))),r(e,["tools"],f)}const u=i(t,["toolConfig"]);e!==void 0&&u!=null&&r(e,["toolConfig"],u);const p=i(t,["kmsKeyName"]);return e!==void 0&&p!=null&&r(e,["encryption_spec","kmsKeyName"],p),n}function hi(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],rn(t,o));const s=i(e,["config"]);return s!=null&&pi(s,n),n}function mi(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["model"],rn(t,o));const s=i(e,["config"]);return s!=null&&fi(s,n),n}function gi(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],B(t,o)),n}function vi(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],B(t,o)),n}function yi(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function bi(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function Ei(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function wi(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const c=i(t,["responseJsonSchema"]);return c!=null&&r(e,["responseJsonSchema"],c),e}function _i(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],B(t,o)),n}function Ai(t,e){const n={},o=i(e,["name"]);return o!=null&&r(n,["_url","name"],B(t,o)),n}function Ii(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function Si(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function Ti(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function xi(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function Ci(t){const e={},n=i(t,["config"]);return n!=null&&Ti(n,e),e}function Oi(t){const e={},n=i(t,["config"]);return n!=null&&xi(n,e),e}function Ri(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["cachedContents"],l)}return e}function Ni(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["cachedContents"],l)}return e}function Pi(t){const e={},n=i(t,["functionCall"]);n!=null&&r(e,["functionCall"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Ei(l));const a=i(t,["functionResponse"]);a!=null&&r(e,["functionResponse"],a);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],di(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const u=i(t,["thought"]);u!=null&&r(e,["thought"],u);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const f=i(t,["videoMetadata"]);return f!=null&&r(e,["videoMetadata"],f),e}function ki(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(f=>f)),r(e,["functionDeclarations"],p)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=i(t,["googleMaps"]);c!=null&&r(e,["googleMaps"],Ii(c));const d=i(t,["googleSearch"]);d!=null&&r(e,["googleSearch"],Si(d));const u=i(t,["urlContext"]);return u!=null&&r(e,["urlContext"],u),e}function Li(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>wi(h))),r(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&r(e,["googleSearchRetrieval"],s);const l=i(t,["computerUse"]);if(l!=null&&r(e,["computerUse"],l),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&r(e,["codeExecution"],a);const c=i(t,["enterpriseWebSearch"]);c!=null&&r(e,["enterpriseWebSearch"],c);const d=i(t,["googleMaps"]);d!=null&&r(e,["googleMaps"],d);const u=i(t,["googleSearch"]);u!=null&&r(e,["googleSearch"],u);const p=i(t,["urlContext"]);return p!=null&&r(e,["urlContext"],p),e}function Mi(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function Di(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&r(e,["ttl"],o);const s=i(t,["expireTime"]);return e!==void 0&&s!=null&&r(e,["expireTime"],s),n}function Ui(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],B(t,o));const s=i(e,["config"]);return s!=null&&Mi(s,n),n}function qi(t,e){const n={},o=i(e,["name"]);o!=null&&r(n,["_url","name"],B(t,o));const s=i(e,["config"]);return s!=null&&Di(s,n),n}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class Gi extends F{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new J(H.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=mi(this.apiClient,e);return c=E("cachedContents",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const u=hi(this.apiClient,e);return c=E("cachedContents",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Ai(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const u=_i(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=vi(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=bi(p),h=new kt;return Object.assign(h,f),h})}else{const u=gi(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=yi(p),h=new kt;return Object.assign(h,f),h})}}async update(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=qi(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const u=Ui(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async listInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Oi(e);return c=E("cachedContents",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Ni(p),h=new Lt;return Object.assign(h,f),h})}else{const u=Ci(e);return c=E("cachedContents",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Ri(p),h=new Lt;return Object.assign(h,f),h})}}}function Ht(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(t){return this instanceof R?(this.v=t,this):new R(t)}function K(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(m){return function(y){return Promise.resolve(y).then(m,f)}}function c(m,y){o[m]&&(s[m]=function(b){return new Promise(function(g,v){l.push([m,b,g,v])>1||d(m,b)})},y&&(s[m]=y(s[m])))}function d(m,y){try{u(o[m](y))}catch(b){h(l[0][3],b)}}function u(m){m.value instanceof R?Promise.resolve(m.value.v).then(p,f):h(l[0][2],m)}function p(m){d("next",m)}function f(m){d("throw",m)}function h(m,y){m(y),l.shift(),l.length&&d(l[0][0],l[0][1])}}function ee(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ht=="function"?Ht(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(c,d){a=t[l](a),s(c,d,a.done,a.value)})}}function s(l,a,c,d){Promise.resolve(d).then(function(u){l({value:u,done:c})},a)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function ji(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:bn(n)}function bn(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Hi(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ft(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const s=[];let l=!0;for(;o<n&&t[o].role==="model";)s.push(t[o]),l&&!bn(t[o])&&(l=!1),o++;l?e.push(...s):e.pop()}return e}class Fi{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Bi(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Bi{constructor(e,n,o,s={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),Hi(l)}async sendMessage(e){var n;await this.sendPromise;const o=D(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,a,c;const d=await s,u=(a=(l=d.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,p=d.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let h=[];p!=null&&(h=(c=p.slice(f))!==null&&c!==void 0?c:[]);const m=u?[u]:[];this.recordHistory(o,m,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const o=D(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?Ft(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,s;return K(this,arguments,function*(){var l,a,c,d;const u=[];try{for(var p=!0,f=ee(e),h;h=yield R(f.next()),l=h.done,!l;p=!0){d=h.value,p=!1;const m=d;if(ji(m)){const y=(s=(o=m.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content;y!==void 0&&u.push(y)}yield yield R(m)}}catch(m){a={error:m}}finally{try{!p&&!l&&(c=f.return)&&(yield R(c.call(f)))}finally{if(a)throw a.error}}this.recordHistory(n,u)})}recordHistory(e,n,o){let s=[];n.length>0&&n.every(l=>l.role!==void 0)?s=n:s.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Ft(o)):this.history.push(e),this.history.push(...s)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ae extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ae.prototype)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Vi(t){const e={},n=i(t,["file"]);return n!=null&&r(e,["file"],n),e}function Ji(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function $i(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["_url","file"],pn(n)),e}function Yi(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function Ki(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["_url","file"],pn(n)),e}function Wi(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function zi(t){const e={},n=i(t,["config"]);return n!=null&&Wi(n,e),e}function Zi(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["files"],l)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class Xi extends F{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new J(H.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=zi(e);return l=E("files",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const u=Zi(d),p=new ao;return Object.assign(p,u),p})}}async createInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Vi(e);return l=E("upload/v1beta/files",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const u=Ji(d),p=new co;return Object.assign(p,u),p})}}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Ki(e);return l=E("files/{file}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$i(e);return l=E("files/{file}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const u=Yi(d),p=new uo;return Object.assign(p,u),p})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function oe(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Qi(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>hs(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function es(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function ts(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const c=i(t,["responseJsonSchema"]);return c!=null&&r(e,["responseJsonSchema"],c),e}function ns(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&r(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&r(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&r(e,["audioTimestamp"],s);const l=i(t,["candidateCount"]);l!=null&&r(e,["candidateCount"],l);const a=i(t,["enableAffectiveDialog"]);a!=null&&r(e,["enableAffectiveDialog"],a);const c=i(t,["frequencyPenalty"]);c!=null&&r(e,["frequencyPenalty"],c);const d=i(t,["logprobs"]);d!=null&&r(e,["logprobs"],d);const u=i(t,["maxOutputTokens"]);u!=null&&r(e,["maxOutputTokens"],u);const p=i(t,["mediaResolution"]);p!=null&&r(e,["mediaResolution"],p);const f=i(t,["presencePenalty"]);f!=null&&r(e,["presencePenalty"],f);const h=i(t,["responseLogprobs"]);h!=null&&r(e,["responseLogprobs"],h);const m=i(t,["responseMimeType"]);m!=null&&r(e,["responseMimeType"],m);const y=i(t,["responseModalities"]);y!=null&&r(e,["responseModalities"],y);const b=i(t,["responseSchema"]);b!=null&&r(e,["responseSchema"],b);const g=i(t,["routingConfig"]);g!=null&&r(e,["routingConfig"],g);const v=i(t,["seed"]);v!=null&&r(e,["seed"],v);const w=i(t,["speechConfig"]);w!=null&&r(e,["speechConfig"],En(w));const _=i(t,["stopSequences"]);_!=null&&r(e,["stopSequences"],_);const A=i(t,["temperature"]);A!=null&&r(e,["temperature"],A);const S=i(t,["thinkingConfig"]);S!=null&&r(e,["thinkingConfig"],S);const T=i(t,["topK"]);T!=null&&r(e,["topK"],T);const x=i(t,["topP"]);if(x!=null&&r(e,["topP"],x),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function os(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function is(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function ss(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const c=i(t,["topK"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","topK"],c);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const u=i(t,["mediaResolution"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","mediaResolution"],u);const p=i(t,["seed"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","seed"],p);const f=i(t,["speechConfig"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","speechConfig"],Ce(f));const h=i(t,["thinkingConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","thinkingConfig"],h);const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=i(t,["systemInstruction"]);e!==void 0&&y!=null&&r(e,["setup","systemInstruction"],Qi(D(y)));const b=i(t,["tools"]);if(e!==void 0&&b!=null){let T=Z(b);Array.isArray(T)&&(T=T.map(x=>gs(z(x)))),r(e,["setup","tools"],T)}const g=i(t,["sessionResumption"]);e!==void 0&&g!=null&&r(e,["setup","sessionResumption"],ms(g));const v=i(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&r(e,["setup","inputAudioTranscription"],v);const w=i(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&r(e,["setup","outputAudioTranscription"],w);const _=i(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&r(e,["setup","realtimeInputConfig"],_);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],A);const S=i(t,["proactivity"]);return e!==void 0&&S!=null&&r(e,["setup","proactivity"],S),n}function rs(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],ns(o));const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const c=i(t,["topK"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","topK"],c);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const u=i(t,["mediaResolution"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","mediaResolution"],u);const p=i(t,["seed"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","seed"],p);const f=i(t,["speechConfig"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","speechConfig"],En(Ce(f)));const h=i(t,["thinkingConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","thinkingConfig"],h);const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=i(t,["systemInstruction"]);e!==void 0&&y!=null&&r(e,["setup","systemInstruction"],D(y));const b=i(t,["tools"]);if(e!==void 0&&b!=null){let T=Z(b);Array.isArray(T)&&(T=T.map(x=>vs(z(x)))),r(e,["setup","tools"],T)}const g=i(t,["sessionResumption"]);e!==void 0&&g!=null&&r(e,["setup","sessionResumption"],g);const v=i(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&r(e,["setup","inputAudioTranscription"],v);const w=i(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&r(e,["setup","outputAudioTranscription"],w);const _=i(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&r(e,["setup","realtimeInputConfig"],_);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],A);const S=i(t,["proactivity"]);return e!==void 0&&S!=null&&r(e,["setup","proactivity"],S),n}function ls(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],C(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],ss(s,n)),n}function as(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],C(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],rs(s,n)),n}function cs(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&r(e,["musicGenerationConfig"],n),e}function us(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),r(e,["weightedPrompts"],o)}return e}function ds(t){const e={},n=i(t,["media"]);if(n!=null){let u=ln(n);Array.isArray(u)&&(u=u.map(p=>oe(p))),r(e,["mediaChunks"],u)}const o=i(t,["audio"]);o!=null&&r(e,["audio"],oe(cn(o)));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],oe(an(l)));const a=i(t,["text"]);a!=null&&r(e,["text"],a);const c=i(t,["activityStart"]);c!=null&&r(e,["activityStart"],c);const d=i(t,["activityEnd"]);return d!=null&&r(e,["activityEnd"],d),e}function ps(t){const e={},n=i(t,["media"]);if(n!=null){let u=ln(n);Array.isArray(u)&&(u=u.map(p=>p)),r(e,["mediaChunks"],u)}const o=i(t,["audio"]);o!=null&&r(e,["audio"],cn(o));const s=i(t,["audioStreamEnd"]);s!=null&&r(e,["audioStreamEnd"],s);const l=i(t,["video"]);l!=null&&r(e,["video"],an(l));const a=i(t,["text"]);a!=null&&r(e,["text"],a);const c=i(t,["activityStart"]);c!=null&&r(e,["activityStart"],c);const d=i(t,["activityEnd"]);return d!=null&&r(e,["activityEnd"],d),e}function fs(t){const e={},n=i(t,["setupComplete"]);n!=null&&r(e,["setupComplete"],n);const o=i(t,["serverContent"]);o!=null&&r(e,["serverContent"],o);const s=i(t,["toolCall"]);s!=null&&r(e,["toolCall"],s);const l=i(t,["toolCallCancellation"]);l!=null&&r(e,["toolCallCancellation"],l);const a=i(t,["usageMetadata"]);a!=null&&r(e,["usageMetadata"],ys(a));const c=i(t,["goAway"]);c!=null&&r(e,["goAway"],c);const d=i(t,["sessionResumptionUpdate"]);return d!=null&&r(e,["sessionResumptionUpdate"],d),e}function hs(t){const e={},n=i(t,["functionCall"]);n!=null&&r(e,["functionCall"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],es(l));const a=i(t,["functionResponse"]);a!=null&&r(e,["functionResponse"],a);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],oe(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const u=i(t,["thought"]);u!=null&&r(e,["thought"],u);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const f=i(t,["videoMetadata"]);return f!=null&&r(e,["videoMetadata"],f),e}function ms(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function En(t){const e={},n=i(t,["languageCode"]);n!=null&&r(e,["languageCode"],n);const o=i(t,["voiceConfig"]);if(o!=null&&r(e,["voiceConfig"],o),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function gs(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(f=>f)),r(e,["functionDeclarations"],p)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=i(t,["googleMaps"]);c!=null&&r(e,["googleMaps"],os(c));const d=i(t,["googleSearch"]);d!=null&&r(e,["googleSearch"],is(d));const u=i(t,["urlContext"]);return u!=null&&r(e,["urlContext"],u),e}function vs(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>ts(h))),r(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&r(e,["googleSearchRetrieval"],s);const l=i(t,["computerUse"]);if(l!=null&&r(e,["computerUse"],l),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&r(e,["codeExecution"],a);const c=i(t,["enterpriseWebSearch"]);c!=null&&r(e,["enterpriseWebSearch"],c);const d=i(t,["googleMaps"]);d!=null&&r(e,["googleMaps"],d);const u=i(t,["googleSearch"]);u!=null&&r(e,["googleSearch"],u);const p=i(t,["urlContext"]);return p!=null&&r(e,["urlContext"],p),e}function ys(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&r(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&r(e,["cachedContentTokenCount"],o);const s=i(t,["candidatesTokenCount"]);s!=null&&r(e,["responseTokenCount"],s);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&r(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&r(e,["thoughtsTokenCount"],a);const c=i(t,["totalTokenCount"]);c!=null&&r(e,["totalTokenCount"],c);const d=i(t,["promptTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>y)),r(e,["promptTokensDetails"],m)}const u=i(t,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(y=>y)),r(e,["cacheTokensDetails"],m)}const p=i(t,["candidatesTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>y)),r(e,["responseTokensDetails"],m)}const f=i(t,["toolUsePromptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>y)),r(e,["toolUsePromptTokensDetails"],m)}const h=i(t,["trafficType"]);return h!=null&&r(e,["trafficType"],h),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function bs(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Es(t){const e={},n=i(t,["content"]);n!=null&&r(e,["content"],n);const o=i(t,["citationMetadata"]);o!=null&&r(e,["citationMetadata"],ws(o));const s=i(t,["tokenCount"]);s!=null&&r(e,["tokenCount"],s);const l=i(t,["finishReason"]);l!=null&&r(e,["finishReason"],l);const a=i(t,["avgLogprobs"]);a!=null&&r(e,["avgLogprobs"],a);const c=i(t,["groundingMetadata"]);c!=null&&r(e,["groundingMetadata"],c);const d=i(t,["index"]);d!=null&&r(e,["index"],d);const u=i(t,["logprobsResult"]);u!=null&&r(e,["logprobsResult"],u);const p=i(t,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>m)),r(e,["safetyRatings"],h)}const f=i(t,["urlContextMetadata"]);return f!=null&&r(e,["urlContextMetadata"],f),e}function ws(t){const e={},n=i(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>s)),r(e,["citations"],o)}return e}function _s(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["contents"]);if(s!=null){let l=U(s);Array.isArray(l)&&(l=l.map(a=>a)),r(n,["contents"],l)}return n}function As(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["tokensInfo"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),r(e,["tokensInfo"],s)}return e}function Is(t){const e={},n=i(t,["values"]);n!=null&&r(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&r(e,["statistics"],Ss(o)),e}function Ss(t){const e={},n=i(t,["truncated"]);n!=null&&r(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&r(e,["tokenCount"],o),e}function ce(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Rr(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ts(t){const e={},n=i(t,["controlType"]);n!=null&&r(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&r(e,["computeControl"],o),e}function xs(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Cs(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&r(e,["systemInstruction"],D(o));const s=i(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>Sn(c))),r(e,["tools"],a)}const l=i(t,["generationConfig"]);return e!==void 0&&l!=null&&r(e,["generationConfig"],vr(l)),n}function Os(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["contents"]);if(s!=null){let a=U(s);Array.isArray(a)&&(a=a.map(c=>ce(c))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&xs(l),n}function Rs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["contents"]);if(s!=null){let a=U(s);Array.isArray(a)&&(a=a.map(c=>c)),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&Cs(l,n),n}function Ns(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);o!=null&&r(e,["totalTokens"],o);const s=i(t,["cachedContentTokenCount"]);return s!=null&&r(e,["cachedContentTokenCount"],s),e}function Ps(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);return o!=null&&r(e,["totalTokens"],o),e}function ks(t,e){const n={},o=i(e,["model"]);return o!=null&&r(n,["_url","name"],C(t,o)),n}function Ls(t,e){const n={},o=i(e,["model"]);return o!=null&&r(n,["_url","name"],C(t,o)),n}function Ms(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function Ds(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}function Us(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const c=i(t,["guidanceScale"]);e!==void 0&&c!=null&&r(e,["parameters","guidanceScale"],c);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&r(e,["parameters","safetySetting"],u);const p=i(t,["personGeneration"]);e!==void 0&&p!=null&&r(e,["parameters","personGeneration"],p);const f=i(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&r(e,["parameters","includeSafetyAttributes"],f);const h=i(t,["includeRaiReason"]);e!==void 0&&h!=null&&r(e,["parameters","includeRaiReason"],h);const m=i(t,["language"]);e!==void 0&&m!=null&&r(e,["parameters","language"],m);const y=i(t,["outputMimeType"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","mimeType"],y);const b=i(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&r(e,["parameters","outputOptions","compressionQuality"],b);const g=i(t,["addWatermark"]);e!==void 0&&g!=null&&r(e,["parameters","addWatermark"],g);const v=i(t,["labels"]);e!==void 0&&v!=null&&r(e,["labels"],v);const w=i(t,["editMode"]);e!==void 0&&w!=null&&r(e,["parameters","editMode"],w);const _=i(t,["baseSteps"]);return e!==void 0&&_!=null&&r(e,["parameters","editConfig","baseSteps"],_),n}function qs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["referenceImages"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Dr(d))),r(n,["instances[0]","referenceImages"],c)}const a=i(e,["config"]);return a!=null&&Us(a,n),n}function Gs(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>ue(l))),r(e,["generatedImages"],s)}return e}function js(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["requests[]","taskType"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["requests[]","title"],s);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&r(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Hs(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&r(e,["instances[]","task_type"],o);const s=i(t,["title"]);e!==void 0&&s!=null&&r(e,["instances[]","title"],s);const l=i(t,["outputDimensionality"]);e!==void 0&&l!=null&&r(e,["parameters","outputDimensionality"],l);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&r(e,["instances[]","mimeType"],a);const c=i(t,["autoTruncate"]);return e!==void 0&&c!=null&&r(e,["parameters","autoTruncate"],c),n}function Fs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["contents"]);if(s!=null){let c=Se(t,s);Array.isArray(c)&&(c=c.map(d=>d)),r(n,["requests[]","content"],c)}const l=i(e,["config"]);l!=null&&js(l,n);const a=i(e,["model"]);return a!==void 0&&r(n,["requests[]","model"],C(t,a)),n}function Bs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["contents"]);if(s!=null){let a=Se(t,s);Array.isArray(a)&&(a=a.map(c=>c)),r(n,["instances[]","content"],a)}const l=i(e,["config"]);return l!=null&&Hs(l,n),n}function Vs(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["embeddings"],l)}const s=i(t,["metadata"]);return s!=null&&r(e,["metadata"],s),e}function Js(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Is(a))),r(e,["embeddings"],l)}const s=i(t,["metadata"]);return s!=null&&r(e,["metadata"],s),e}function $s(t){const e={},n=i(t,["endpoint"]);n!=null&&r(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&r(e,["deployedModelId"],o),e}function Ys(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ks(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&r(e,["description"],n);const o=i(t,["name"]);o!=null&&r(e,["name"],o);const s=i(t,["parameters"]);s!=null&&r(e,["parameters"],s);const l=i(t,["parametersJsonSchema"]);l!=null&&r(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&r(e,["response"],a);const c=i(t,["responseJsonSchema"]);return c!=null&&r(e,["responseJsonSchema"],c),e}function Ws(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],ce(D(s)));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const c=i(e,["topK"]);c!=null&&r(o,["topK"],c);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const u=i(e,["maxOutputTokens"]);u!=null&&r(o,["maxOutputTokens"],u);const p=i(e,["stopSequences"]);p!=null&&r(o,["stopSequences"],p);const f=i(e,["responseLogprobs"]);f!=null&&r(o,["responseLogprobs"],f);const h=i(e,["logprobs"]);h!=null&&r(o,["logprobs"],h);const m=i(e,["presencePenalty"]);m!=null&&r(o,["presencePenalty"],m);const y=i(e,["frequencyPenalty"]);y!=null&&r(o,["frequencyPenalty"],y);const b=i(e,["seed"]);b!=null&&r(o,["seed"],b);const g=i(e,["responseMimeType"]);g!=null&&r(o,["responseMimeType"],g);const v=i(e,["responseSchema"]);v!=null&&r(o,["responseSchema"],Te(v));const w=i(e,["responseJsonSchema"]);if(w!=null&&r(o,["responseJsonSchema"],w),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=i(e,["safetySettings"]);if(n!==void 0&&_!=null){let N=_;Array.isArray(N)&&(N=N.map(G=>Ur(G))),r(n,["safetySettings"],N)}const A=i(e,["tools"]);if(n!==void 0&&A!=null){let N=Z(A);Array.isArray(N)&&(N=N.map(G=>Br(z(G)))),r(n,["tools"],N)}const S=i(e,["toolConfig"]);if(n!==void 0&&S!=null&&r(n,["toolConfig"],S),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=i(e,["cachedContent"]);n!==void 0&&T!=null&&r(n,["cachedContent"],B(t,T));const x=i(e,["responseModalities"]);x!=null&&r(o,["responseModalities"],x);const M=i(e,["mediaResolution"]);M!=null&&r(o,["mediaResolution"],M);const I=i(e,["speechConfig"]);if(I!=null&&r(o,["speechConfig"],xe(I)),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=i(e,["thinkingConfig"]);O!=null&&r(o,["thinkingConfig"],O);const k=i(e,["imageConfig"]);return k!=null&&r(o,["imageConfig"],k),o}function zs(t,e,n){const o={},s=i(e,["systemInstruction"]);n!==void 0&&s!=null&&r(n,["systemInstruction"],D(s));const l=i(e,["temperature"]);l!=null&&r(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&r(o,["topP"],a);const c=i(e,["topK"]);c!=null&&r(o,["topK"],c);const d=i(e,["candidateCount"]);d!=null&&r(o,["candidateCount"],d);const u=i(e,["maxOutputTokens"]);u!=null&&r(o,["maxOutputTokens"],u);const p=i(e,["stopSequences"]);p!=null&&r(o,["stopSequences"],p);const f=i(e,["responseLogprobs"]);f!=null&&r(o,["responseLogprobs"],f);const h=i(e,["logprobs"]);h!=null&&r(o,["logprobs"],h);const m=i(e,["presencePenalty"]);m!=null&&r(o,["presencePenalty"],m);const y=i(e,["frequencyPenalty"]);y!=null&&r(o,["frequencyPenalty"],y);const b=i(e,["seed"]);b!=null&&r(o,["seed"],b);const g=i(e,["responseMimeType"]);g!=null&&r(o,["responseMimeType"],g);const v=i(e,["responseSchema"]);v!=null&&r(o,["responseSchema"],Te(v));const w=i(e,["responseJsonSchema"]);w!=null&&r(o,["responseJsonSchema"],w);const _=i(e,["routingConfig"]);_!=null&&r(o,["routingConfig"],_);const A=i(e,["modelSelectionConfig"]);A!=null&&r(o,["modelConfig"],A);const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let j=S;Array.isArray(j)&&(j=j.map(pe=>pe)),r(n,["safetySettings"],j)}const T=i(e,["tools"]);if(n!==void 0&&T!=null){let j=Z(T);Array.isArray(j)&&(j=j.map(pe=>Sn(z(pe)))),r(n,["tools"],j)}const x=i(e,["toolConfig"]);n!==void 0&&x!=null&&r(n,["toolConfig"],x);const M=i(e,["labels"]);n!==void 0&&M!=null&&r(n,["labels"],M);const I=i(e,["cachedContent"]);n!==void 0&&I!=null&&r(n,["cachedContent"],B(t,I));const O=i(e,["responseModalities"]);O!=null&&r(o,["responseModalities"],O);const k=i(e,["mediaResolution"]);k!=null&&r(o,["mediaResolution"],k);const N=i(e,["speechConfig"]);N!=null&&r(o,["speechConfig"],In(xe(N)));const G=i(e,["audioTimestamp"]);G!=null&&r(o,["audioTimestamp"],G);const Re=i(e,["thinkingConfig"]);Re!=null&&r(o,["thinkingConfig"],Re);const Ne=i(e,["imageConfig"]);return Ne!=null&&r(o,["imageConfig"],Ne),o}function Bt(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["contents"]);if(s!=null){let a=U(s);Array.isArray(a)&&(a=a.map(c=>ce(c))),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],Ws(t,l,n)),n}function Vt(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["contents"]);if(s!=null){let a=U(s);Array.isArray(a)&&(a=a.map(c=>c)),r(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&r(n,["generationConfig"],zs(t,l,n)),n}function Jt(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>Es(u))),r(e,["candidates"],d)}const s=i(t,["modelVersion"]);s!=null&&r(e,["modelVersion"],s);const l=i(t,["promptFeedback"]);l!=null&&r(e,["promptFeedback"],l);const a=i(t,["responseId"]);a!=null&&r(e,["responseId"],a);const c=i(t,["usageMetadata"]);return c!=null&&r(e,["usageMetadata"],c),e}function $t(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>p)),r(e,["candidates"],u)}const s=i(t,["createTime"]);s!=null&&r(e,["createTime"],s);const l=i(t,["modelVersion"]);l!=null&&r(e,["modelVersion"],l);const a=i(t,["promptFeedback"]);a!=null&&r(e,["promptFeedback"],a);const c=i(t,["responseId"]);c!=null&&r(e,["responseId"],c);const d=i(t,["usageMetadata"]);return d!=null&&r(e,["usageMetadata"],d),e}function Zs(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["aspectRatio"]);e!==void 0&&s!=null&&r(e,["parameters","aspectRatio"],s);const l=i(t,["guidanceScale"]);if(e!==void 0&&l!=null&&r(e,["parameters","guidanceScale"],l),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&r(e,["parameters","safetySetting"],a);const c=i(t,["personGeneration"]);e!==void 0&&c!=null&&r(e,["parameters","personGeneration"],c);const d=i(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&r(e,["parameters","includeSafetyAttributes"],d);const u=i(t,["includeRaiReason"]);e!==void 0&&u!=null&&r(e,["parameters","includeRaiReason"],u);const p=i(t,["language"]);e!==void 0&&p!=null&&r(e,["parameters","language"],p);const f=i(t,["outputMimeType"]);e!==void 0&&f!=null&&r(e,["parameters","outputOptions","mimeType"],f);const h=i(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&r(e,["parameters","outputOptions","compressionQuality"],h),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=i(t,["imageSize"]);if(e!==void 0&&m!=null&&r(e,["parameters","sampleImageSize"],m),i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Xs(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["negativePrompt"]);e!==void 0&&s!=null&&r(e,["parameters","negativePrompt"],s);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&r(e,["parameters","aspectRatio"],a);const c=i(t,["guidanceScale"]);e!==void 0&&c!=null&&r(e,["parameters","guidanceScale"],c);const d=i(t,["seed"]);e!==void 0&&d!=null&&r(e,["parameters","seed"],d);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&r(e,["parameters","safetySetting"],u);const p=i(t,["personGeneration"]);e!==void 0&&p!=null&&r(e,["parameters","personGeneration"],p);const f=i(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&r(e,["parameters","includeSafetyAttributes"],f);const h=i(t,["includeRaiReason"]);e!==void 0&&h!=null&&r(e,["parameters","includeRaiReason"],h);const m=i(t,["language"]);e!==void 0&&m!=null&&r(e,["parameters","language"],m);const y=i(t,["outputMimeType"]);e!==void 0&&y!=null&&r(e,["parameters","outputOptions","mimeType"],y);const b=i(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&r(e,["parameters","outputOptions","compressionQuality"],b);const g=i(t,["addWatermark"]);e!==void 0&&g!=null&&r(e,["parameters","addWatermark"],g);const v=i(t,["labels"]);e!==void 0&&v!=null&&r(e,["labels"],v);const w=i(t,["imageSize"]);e!==void 0&&w!=null&&r(e,["parameters","sampleImageSize"],w);const _=i(t,["enhancePrompt"]);return e!==void 0&&_!=null&&r(e,["parameters","enhancePrompt"],_),n}function Qs(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&Zs(l,n),n}function er(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["config"]);return l!=null&&Xs(l,n),n}function tr(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>fr(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],_n(s)),e}function nr(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ue(a))),r(e,["generatedImages"],l)}const s=i(t,["positivePromptSafetyAttributes"]);return s!=null&&r(e,["positivePromptSafetyAttributes"],An(s)),e}function or(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=i(t,["durationSeconds"]);if(e!==void 0&&s!=null&&r(e,["parameters","durationSeconds"],s),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["aspectRatio"]);e!==void 0&&l!=null&&r(e,["parameters","aspectRatio"],l);const a=i(t,["resolution"]);e!==void 0&&a!=null&&r(e,["parameters","resolution"],a);const c=i(t,["personGeneration"]);if(e!==void 0&&c!=null&&r(e,["parameters","personGeneration"],c),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=i(t,["negativePrompt"]);e!==void 0&&d!=null&&r(e,["parameters","negativePrompt"],d);const u=i(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&r(e,["parameters","enhancePrompt"],u),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=i(t,["lastFrame"]);e!==void 0&&p!=null&&r(e,["instances[0]","lastFrame"],de(p));const f=i(t,["referenceImages"]);if(e!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>nl(m))),r(e,["instances[0]","referenceImages"],h)}if(i(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ir(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["outputGcsUri"]);e!==void 0&&s!=null&&r(e,["parameters","storageUri"],s);const l=i(t,["fps"]);e!==void 0&&l!=null&&r(e,["parameters","fps"],l);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&r(e,["parameters","durationSeconds"],a);const c=i(t,["seed"]);e!==void 0&&c!=null&&r(e,["parameters","seed"],c);const d=i(t,["aspectRatio"]);e!==void 0&&d!=null&&r(e,["parameters","aspectRatio"],d);const u=i(t,["resolution"]);e!==void 0&&u!=null&&r(e,["parameters","resolution"],u);const p=i(t,["personGeneration"]);e!==void 0&&p!=null&&r(e,["parameters","personGeneration"],p);const f=i(t,["pubsubTopic"]);e!==void 0&&f!=null&&r(e,["parameters","pubsubTopic"],f);const h=i(t,["negativePrompt"]);e!==void 0&&h!=null&&r(e,["parameters","negativePrompt"],h);const m=i(t,["enhancePrompt"]);e!==void 0&&m!=null&&r(e,["parameters","enhancePrompt"],m);const y=i(t,["generateAudio"]);e!==void 0&&y!=null&&r(e,["parameters","generateAudio"],y);const b=i(t,["lastFrame"]);e!==void 0&&b!=null&&r(e,["instances[0]","lastFrame"],q(b));const g=i(t,["referenceImages"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(A=>ol(A))),r(e,["instances[0]","referenceImages"],_)}const v=i(t,["mask"]);e!==void 0&&v!=null&&r(e,["instances[0]","mask"],tl(v));const w=i(t,["compressionQuality"]);return e!==void 0&&w!=null&&r(e,["parameters","compressionQuality"],w),n}function sr(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&r(e,["response"],cr(a)),e}function rr(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],ur(a)),e}function lr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(n,["instances[0]","image"],de(l));const a=i(e,["video"]);a!=null&&r(n,["instances[0]","video"],Tn(a));const c=i(e,["source"]);c!=null&&dr(c,n);const d=i(e,["config"]);return d!=null&&or(d,n),n}function ar(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["prompt"]);s!=null&&r(n,["instances[0]","prompt"],s);const l=i(e,["image"]);l!=null&&r(n,["instances[0]","image"],q(l));const a=i(e,["video"]);a!=null&&r(n,["instances[0]","video"],xn(a));const c=i(e,["source"]);c!=null&&pr(c,n);const d=i(e,["config"]);return d!=null&&ir(d,n),n}function cr(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>mr(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function ur(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>gr(a))),r(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&r(e,["raiMediaFilteredCount"],o);const s=i(t,["raiMediaFilteredReasons"]);return s!=null&&r(e,["raiMediaFilteredReasons"],s),e}function dr(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],de(s));const l=i(t,["video"]);return e!==void 0&&l!=null&&r(e,["instances[0]","video"],Tn(l)),n}function pr(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],q(s));const l=i(t,["video"]);return e!==void 0&&l!=null&&r(e,["instances[0]","video"],xn(l)),n}function fr(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],_r(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);return s!=null&&r(e,["safetyAttributes"],_n(s)),e}function ue(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["image"],wn(n));const o=i(t,["raiFilteredReason"]);o!=null&&r(e,["raiFilteredReason"],o);const s=i(t,["_self"]);s!=null&&r(e,["safetyAttributes"],An(s));const l=i(t,["prompt"]);return l!=null&&r(e,["enhancedPrompt"],l),e}function hr(t){const e={},n=i(t,["_self"]);n!=null&&r(e,["mask"],wn(n));const o=i(t,["labels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),r(e,["labels"],s)}return e}function mr(t){const e={},n=i(t,["video"]);return n!=null&&r(e,["video"],Qr(n)),e}function gr(t){const e={},n=i(t,["_self"]);return n!=null&&r(e,["video"],el(n)),e}function vr(t){const e={},n=i(t,["modelSelectionConfig"]);n!=null&&r(e,["modelConfig"],n);const o=i(t,["responseJsonSchema"]);o!=null&&r(e,["responseJsonSchema"],o);const s=i(t,["audioTimestamp"]);s!=null&&r(e,["audioTimestamp"],s);const l=i(t,["candidateCount"]);l!=null&&r(e,["candidateCount"],l);const a=i(t,["enableAffectiveDialog"]);a!=null&&r(e,["enableAffectiveDialog"],a);const c=i(t,["frequencyPenalty"]);c!=null&&r(e,["frequencyPenalty"],c);const d=i(t,["logprobs"]);d!=null&&r(e,["logprobs"],d);const u=i(t,["maxOutputTokens"]);u!=null&&r(e,["maxOutputTokens"],u);const p=i(t,["mediaResolution"]);p!=null&&r(e,["mediaResolution"],p);const f=i(t,["presencePenalty"]);f!=null&&r(e,["presencePenalty"],f);const h=i(t,["responseLogprobs"]);h!=null&&r(e,["responseLogprobs"],h);const m=i(t,["responseMimeType"]);m!=null&&r(e,["responseMimeType"],m);const y=i(t,["responseModalities"]);y!=null&&r(e,["responseModalities"],y);const b=i(t,["responseSchema"]);b!=null&&r(e,["responseSchema"],b);const g=i(t,["routingConfig"]);g!=null&&r(e,["routingConfig"],g);const v=i(t,["seed"]);v!=null&&r(e,["seed"],v);const w=i(t,["speechConfig"]);w!=null&&r(e,["speechConfig"],In(w));const _=i(t,["stopSequences"]);_!=null&&r(e,["stopSequences"],_);const A=i(t,["temperature"]);A!=null&&r(e,["temperature"],A);const S=i(t,["thinkingConfig"]);S!=null&&r(e,["thinkingConfig"],S);const T=i(t,["topK"]);T!=null&&r(e,["topK"],T);const x=i(t,["topP"]);if(x!=null&&r(e,["topP"],x),i(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function yr(t,e){const n={},o=i(e,["model"]);return o!=null&&r(n,["_url","name"],C(t,o)),n}function br(t,e){const n={},o=i(e,["model"]);return o!=null&&r(n,["_url","name"],C(t,o)),n}function Er(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function wr(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function _r(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&r(e,["imageBytes"],V(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function wn(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["imageBytes"],V(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function de(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&r(e,["bytesBase64Encoded"],V(n));const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function q(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&r(e,["bytesBase64Encoded"],V(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function Ar(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const c=i(e,["queryBase"]);return n!==void 0&&c!=null&&r(n,["_url","models_url"],fn(t,c)),o}function Ir(t,e,n){const o={},s=i(e,["pageSize"]);n!==void 0&&s!=null&&r(n,["_query","pageSize"],s);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&r(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&r(n,["_query","filter"],a);const c=i(e,["queryBase"]);return n!==void 0&&c!=null&&r(n,["_url","models_url"],fn(t,c)),o}function Sr(t,e){const n={},o=i(e,["config"]);return o!=null&&Ar(t,o,n),n}function Tr(t,e){const n={},o=i(e,["config"]);return o!=null&&Ir(t,o,n),n}function xr(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let l=hn(s);Array.isArray(l)&&(l=l.map(a=>ye(a))),r(e,["models"],l)}return e}function Cr(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["_self"]);if(s!=null){let l=hn(s);Array.isArray(l)&&(l=l.map(a=>be(a))),r(e,["models"],l)}return e}function Or(t){const e={},n=i(t,["maskMode"]);n!=null&&r(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&r(e,["maskClasses"],o);const s=i(t,["maskDilation"]);return s!=null&&r(e,["dilation"],s),e}function ye(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["version"]);l!=null&&r(e,["version"],l);const a=i(t,["_self"]);a!=null&&r(e,["tunedModelInfo"],Vr(a));const c=i(t,["inputTokenLimit"]);c!=null&&r(e,["inputTokenLimit"],c);const d=i(t,["outputTokenLimit"]);d!=null&&r(e,["outputTokenLimit"],d);const u=i(t,["supportedGenerationMethods"]);u!=null&&r(e,["supportedActions"],u);const p=i(t,["temperature"]);p!=null&&r(e,["temperature"],p);const f=i(t,["maxTemperature"]);f!=null&&r(e,["maxTemperature"],f);const h=i(t,["topP"]);h!=null&&r(e,["topP"],h);const m=i(t,["topK"]);m!=null&&r(e,["topK"],m);const y=i(t,["thinking"]);return y!=null&&r(e,["thinking"],y),e}function be(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["displayName"]);o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);s!=null&&r(e,["description"],s);const l=i(t,["versionId"]);l!=null&&r(e,["version"],l);const a=i(t,["deployedModels"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>$s(h))),r(e,["endpoints"],f)}const c=i(t,["labels"]);c!=null&&r(e,["labels"],c);const d=i(t,["_self"]);d!=null&&r(e,["tunedModelInfo"],Jr(d));const u=i(t,["defaultCheckpointId"]);u!=null&&r(e,["defaultCheckpointId"],u);const p=i(t,["checkpoints"]);if(p!=null){let f=p;Array.isArray(f)&&(f=f.map(h=>h)),r(e,["checkpoints"],f)}return e}function Rr(t){const e={},n=i(t,["functionCall"]);n!=null&&r(e,["functionCall"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Ys(l));const a=i(t,["functionResponse"]);a!=null&&r(e,["functionResponse"],a);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],bs(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const u=i(t,["thought"]);u!=null&&r(e,["thought"],u);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const f=i(t,["videoMetadata"]);return f!=null&&r(e,["videoMetadata"],f),e}function Nr(t){const e={},n=i(t,["productImage"]);return n!=null&&r(e,["image"],q(n)),e}function Pr(t,e){const n={},o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&r(e,["parameters","sampleCount"],o);const s=i(t,["baseSteps"]);e!==void 0&&s!=null&&r(e,["parameters","baseSteps"],s);const l=i(t,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const a=i(t,["seed"]);e!==void 0&&a!=null&&r(e,["parameters","seed"],a);const c=i(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&r(e,["parameters","safetySetting"],c);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&r(e,["parameters","personGeneration"],d);const u=i(t,["addWatermark"]);e!==void 0&&u!=null&&r(e,["parameters","addWatermark"],u);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&r(e,["parameters","outputOptions","mimeType"],p);const f=i(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&r(e,["parameters","outputOptions","compressionQuality"],f);const h=i(t,["enhancePrompt"]);e!==void 0&&h!=null&&r(e,["parameters","enhancePrompt"],h);const m=i(t,["labels"]);return e!==void 0&&m!=null&&r(e,["labels"],m),n}function kr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["source"]);s!=null&&Mr(s,n);const l=i(e,["config"]);return l!=null&&Pr(l,n),n}function Lr(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ue(s))),r(e,["generatedImages"],o)}return e}function Mr(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["personImage"]);e!==void 0&&s!=null&&r(e,["instances[0]","personImage","image"],q(s));const l=i(t,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Nr(c))),r(e,["instances[0]","productImages"],a)}return n}function Dr(t){const e={},n=i(t,["referenceImage"]);n!=null&&r(e,["referenceImage"],q(n));const o=i(t,["referenceId"]);o!=null&&r(e,["referenceId"],o);const s=i(t,["referenceType"]);s!=null&&r(e,["referenceType"],s);const l=i(t,["maskImageConfig"]);l!=null&&r(e,["maskImageConfig"],Or(l));const a=i(t,["controlImageConfig"]);a!=null&&r(e,["controlImageConfig"],Ts(a));const c=i(t,["styleImageConfig"]);c!=null&&r(e,["styleImageConfig"],c);const d=i(t,["subjectImageConfig"]);return d!=null&&r(e,["subjectImageConfig"],d),e}function _n(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function An(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&r(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&r(e,["scores"],o);const s=i(t,["contentType"]);return s!=null&&r(e,["contentType"],s),e}function Ur(t){const e={},n=i(t,["category"]);if(n!=null&&r(e,["category"],n),i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=i(t,["threshold"]);return o!=null&&r(e,["threshold"],o),e}function qr(t){const e={},n=i(t,["image"]);return n!=null&&r(e,["image"],q(n)),e}function Gr(t,e){const n={},o=i(t,["mode"]);e!==void 0&&o!=null&&r(e,["parameters","mode"],o);const s=i(t,["maxPredictions"]);e!==void 0&&s!=null&&r(e,["parameters","maxPredictions"],s);const l=i(t,["confidenceThreshold"]);e!==void 0&&l!=null&&r(e,["parameters","confidenceThreshold"],l);const a=i(t,["maskDilation"]);e!==void 0&&a!=null&&r(e,["parameters","maskDilation"],a);const c=i(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&r(e,["parameters","binaryColorThreshold"],c);const d=i(t,["labels"]);return e!==void 0&&d!=null&&r(e,["labels"],d),n}function jr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["source"]);s!=null&&Fr(s,n);const l=i(e,["config"]);return l!=null&&Gr(l,n),n}function Hr(t){const e={},n=i(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>hr(s))),r(e,["generatedMasks"],o)}return e}function Fr(t,e){const n={},o=i(t,["prompt"]);e!==void 0&&o!=null&&r(e,["instances[0]","prompt"],o);const s=i(t,["image"]);e!==void 0&&s!=null&&r(e,["instances[0]","image"],q(s));const l=i(t,["scribbleImage"]);return e!==void 0&&l!=null&&r(e,["instances[0]","scribble"],qr(l)),n}function In(t){const e={},n=i(t,["languageCode"]);n!=null&&r(e,["languageCode"],n);const o=i(t,["voiceConfig"]);if(o!=null&&r(e,["voiceConfig"],o),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Br(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(f=>f)),r(e,["functionDeclarations"],p)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=i(t,["googleMaps"]);c!=null&&r(e,["googleMaps"],Er(c));const d=i(t,["googleSearch"]);d!=null&&r(e,["googleSearch"],wr(d));const u=i(t,["urlContext"]);return u!=null&&r(e,["urlContext"],u),e}function Sn(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>Ks(h))),r(e,["functionDeclarations"],f)}const o=i(t,["retrieval"]);o!=null&&r(e,["retrieval"],o);const s=i(t,["googleSearchRetrieval"]);s!=null&&r(e,["googleSearchRetrieval"],s);const l=i(t,["computerUse"]);if(l!=null&&r(e,["computerUse"],l),i(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=i(t,["codeExecution"]);a!=null&&r(e,["codeExecution"],a);const c=i(t,["enterpriseWebSearch"]);c!=null&&r(e,["enterpriseWebSearch"],c);const d=i(t,["googleMaps"]);d!=null&&r(e,["googleMaps"],d);const u=i(t,["googleSearch"]);u!=null&&r(e,["googleSearch"],u);const p=i(t,["urlContext"]);return p!=null&&r(e,["urlContext"],p),e}function Vr(t){const e={},n=i(t,["baseModel"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function Jr(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&r(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&r(e,["createTime"],o);const s=i(t,["updateTime"]);return s!=null&&r(e,["updateTime"],s),e}function $r(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function Yr(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&r(e,["displayName"],o);const s=i(t,["description"]);e!==void 0&&s!=null&&r(e,["description"],s);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&r(e,["defaultCheckpointId"],l),n}function Kr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","name"],C(t,o));const s=i(e,["config"]);return s!=null&&$r(s,n),n}function Wr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["config"]);return s!=null&&Yr(s,n),n}function zr(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&r(e,["parameters","storageUri"],o);const s=i(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&r(e,["parameters","safetySetting"],s);const l=i(t,["personGeneration"]);e!==void 0&&l!=null&&r(e,["parameters","personGeneration"],l);const a=i(t,["includeRaiReason"]);e!==void 0&&a!=null&&r(e,["parameters","includeRaiReason"],a);const c=i(t,["outputMimeType"]);e!==void 0&&c!=null&&r(e,["parameters","outputOptions","mimeType"],c);const d=i(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&r(e,["parameters","outputOptions","compressionQuality"],d);const u=i(t,["enhanceInputImage"]);e!==void 0&&u!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],u);const p=i(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const f=i(t,["labels"]);e!==void 0&&f!=null&&r(e,["labels"],f);const h=i(t,["numberOfImages"]);e!==void 0&&h!=null&&r(e,["parameters","sampleCount"],h);const m=i(t,["mode"]);return e!==void 0&&m!=null&&r(e,["parameters","mode"],m),n}function Zr(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["_url","model"],C(t,o));const s=i(e,["image"]);s!=null&&r(n,["instances[0]","image"],q(s));const l=i(e,["upscaleFactor"]);l!=null&&r(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&zr(a,n),n}function Xr(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>ue(l))),r(e,["generatedImages"],s)}return e}function Qr(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["encodedVideo"]);o!=null&&r(e,["videoBytes"],V(o));const s=i(t,["encoding"]);return s!=null&&r(e,["mimeType"],s),e}function el(t){const e={},n=i(t,["gcsUri"]);n!=null&&r(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&r(e,["videoBytes"],V(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}function tl(t){const e={},n=i(t,["image"]);n!=null&&r(e,["_self"],q(n));const o=i(t,["maskMode"]);return o!=null&&r(e,["maskMode"],o),e}function nl(t){const e={},n=i(t,["image"]);n!=null&&r(e,["image"],de(n));const o=i(t,["referenceType"]);return o!=null&&r(e,["referenceType"],o),e}function ol(t){const e={},n=i(t,["image"]);n!=null&&r(e,["image"],q(n));const o=i(t,["referenceType"]);return o!=null&&r(e,["referenceType"],o),e}function Tn(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["uri"],n);const o=i(t,["videoBytes"]);o!=null&&r(e,["encodedVideo"],V(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["encoding"],s),e}function xn(t){const e={},n=i(t,["uri"]);n!=null&&r(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&r(e,["bytesBase64Encoded"],V(o));const s=i(t,["mimeType"]);return s!=null&&r(e,["mimeType"],s),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const il="Content-Type",sl="X-Server-Timeout",rl="User-Agent",Ee="x-goog-api-client",ll="1.29.1",al=`google-genai-sdk/${ll}`,cl="v1beta1",ul="v1beta",Yt=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class dl{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:cl,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:ul,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const s=[this.getRequestUrlInternal(n)];return o&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,c]of Object.entries(e.queryParams))s.searchParams.append(a,String(c));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(n))typeof l=="object"?o[s]=Object.assign(Object.assign({},o[s]),l):l!==void 0&&(o[s]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,o);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,s){if(n&&n.timeout||s){const l=new AbortController,a=l.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>l.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=a}return n&&n.extraBody!==null&&pl(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Kt(s),new me(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async s=>(await Kt(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return K(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";for(;;){const{done:a,value:c}=yield R(o.read());if(a){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const f=JSON.parse(JSON.stringify(p.error)),h=f.status,m=f.code,y=`got status: ${h}. ${JSON.stringify(p)}`;if(m>=400&&m<600)throw new ae({message:y,status:m})}}catch(p){if(p.name==="ApiError")throw p}l+=d;let u=l.match(Yt);for(;u;){const p=u[1];try{const f=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield R(new me(f)),l=l.slice(u[0].length),u=l.match(Yt)}catch(f){throw new Error(`exception parsing stream chunk ${p}. ${f}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=al+" "+this.clientOptions.userAgentExtra;return e[rl]=n,e[Ee]=n,e[il]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))o.append(s,l);e.timeout&&e.timeout>0&&o.append(sl,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);s.sizeBytes=String(a.size);const c=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const d={file:s},u=this.getFileName(e),p=E("upload/v1beta/files",d._url),f=await this.fetchUploadUrl(p,s.sizeBytes,s.mimeType,u,d,n==null?void 0:n.httpOptions);return l.upload(e,f,this)}async uploadFileToFileSearchStore(e,n,o){var s;const l=this.clientOptions.uploader,a=await l.stat(n),c=String(a.size),d=(s=o==null?void 0:o.mimeType)!==null&&s!==void 0?s:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),f={};o!=null&&o.customMetadata&&(f.customMetadata=o.customMetadata),o!=null&&o.chunkingConfig&&(f.chunkingConfig=o.chunkingConfig);const h=await this.fetchUploadUrl(u,c,d,p,f,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,s,l,a){var c;let d={};a?d=a:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},s?{"X-Goog-Upload-File-Name":s}:{})};const u=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:d});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=u==null?void 0:u.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Kt(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(o);throw n>=400&&n<600?new ae({message:s,status:n}):new Error(s)}}function pl(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const c=Object.assign({},l);for(const d in a)if(Object.prototype.hasOwnProperty.call(a,d)){const u=a[d],p=c[d];u&&typeof u=="object"&&!Array.isArray(u)&&p&&typeof p=="object"&&!Array.isArray(p)?c[d]=o(p,u):(p&&u&&typeof p!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof p}, New type: ${typeof u}. Overwriting.`),c[d]=u)}return c}const s=o(n,e);t.body=JSON.stringify(s)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const fl="mcp_used/unknown";let hl=!1;function Cn(t){for(const e of t)if(ml(e)||typeof e=="object"&&"inputSchema"in e)return!0;return hl}function On(t){var e;const n=(e=t[Ee])!==null&&e!==void 0?e:"";t[Ee]=(n+` ${fl}`).trimStart()}function ml(t){return t!==null&&typeof t=="object"&&t instanceof Oe}function gl(t,e=100){return K(this,arguments,function*(){let n,o=0;for(;o<e;){const s=yield R(t.listTools({cursor:n}));for(const l of s.tools)yield yield R(l),o++;if(!s.nextCursor)break;n=s.nextCursor}})}class Oe{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Oe(e,n)}async initialize(){var e,n,o,s;if(this.mcpTools.length>0)return;const l={},a=[];for(const p of this.mcpClients)try{for(var c=!0,d=(n=void 0,ee(gl(p))),u;u=await d.next(),e=u.done,!e;c=!0){s=u.value,c=!1;const f=s;a.push(f);const h=f.name;if(l[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);l[h]=p}}catch(f){n={error:f}}finally{try{!c&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),wo(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await s.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/async function vl(t,e,n){const o=new fo;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(o,s),e(o)}class yl{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=wl(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),d=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${c}`;let u=()=>{};const p=new Promise(v=>{u=v}),f=e.callbacks,h=function(){u({})},m=this.apiClient,y={onopen:h,onmessage:v=>{vl(m,f.onmessage,v)},onerror:(n=f==null?void 0:f.onerror)!==null&&n!==void 0?n:function(v){},onclose:(o=f==null?void 0:f.onclose)!==null&&o!==void 0?o:function(v){}},b=this.webSocketFactory.create(d,El(a),y);b.connect(),await p;const g={setup:{model:C(this.apiClient,e.model)}};return b.send(JSON.stringify(g)),new bl(b,this.apiClient)}}class bl{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=us(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=cs(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl($.PLAY)}pause(){this.sendPlaybackControl($.PAUSE)}stop(){this.sendPlaybackControl($.STOP)}resetContext(){this.sendPlaybackControl($.RESET_CONTEXT)}close(){this.conn.close()}}function El(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function wl(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const _l="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Al(t,e,n){const o=new po;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const l=JSON.parse(s);if(t.isVertexAI()){const a=fs(l);Object.assign(o,a)}else Object.assign(o,l);e(o)}class Il{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new yl(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,s,l,a,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let p;const f=this.apiClient.getHeaders();e.config&&e.config.tools&&Cn(e.config.tools)&&On(f);const h=Cl(f);if(this.apiClient.isVertexAI())p=`${d}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,p);else{const I=this.apiClient.getApiKey();let O="BidiGenerateContent",k="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",k="access_token"),p=`${d}/ws/google.ai.generativelanguage.${u}.GenerativeService.${O}?${k}=${I}`}let m=()=>{};const y=new Promise(I=>{m=I}),b=e.callbacks,g=function(){var I;(I=b==null?void 0:b.onopen)===null||I===void 0||I.call(b),m({})},v=this.apiClient,w={onopen:g,onmessage:I=>{Al(v,b.onmessage,I)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(I){},onclose:(o=b==null?void 0:b.onclose)!==null&&o!==void 0?o:function(I){}},_=this.webSocketFactory.create(p,xl(h),w);_.connect(),await y;let A=C(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const I=this.apiClient.getProject(),O=this.apiClient.getLocation();A=`projects/${I}/locations/${O}/`+A}let S={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ie.AUDIO]}:e.config.responseModalities=[ie.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const T=(c=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[],x=[];for(const I of T)if(this.isCallableTool(I)){const O=I;x.push(await O.tool())}else x.push(I);x.length>0&&(e.config.tools=x);const M={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=as(this.apiClient,M):S=ls(this.apiClient,M),delete S.config,_.send(JSON.stringify(S)),new Tl(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Sl={turnComplete:!0};class Tl{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=U(n.turns),e.isVertexAI()||(o=o.map(s=>ce(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const s of o){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(_l)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Sl),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ps(e)}:n={realtimeInput:ds(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function xl(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function Cl(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const Wt=10;function zt(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(W(a)){s=!0;break}if(!s)return!0;const l=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function W(t){return"callTool"in t&&typeof t.callTool=="function"}function Ol(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>W(s)))!==null&&o!==void 0?o:!1}function Zt(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,s)=>{if(W(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&n.push(s)}),n}function Xt(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class Rl extends F{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,s,l,a,c;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Ol(n)||zt(n.config))return await this.generateContentInternal(d);const u=Zt(n);if(u.length>0){const b=u.map(g=>`tools[${g}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let p,f;const h=U(d.contents),m=(l=(s=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Wt;let y=0;for(;y<m&&(p=await this.generateContentInternal(d),!(!p.functionCalls||p.functionCalls.length===0));){const b=p.candidates[0].content,g=[];for(const v of(c=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[])if(W(v)){const w=await v.callTool(p.functionCalls);g.push(...w)}y++,f={role:"user",parts:g},d.contents=U(d.contents),d.contents.push(b),d.contents.push(f),Xt(d.config)&&(h.push(b),h.push(f))}return Xt(d.config)&&(p.automaticFunctionCallingHistory=h),p},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),zt(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}const o=Zt(n);if(o.length>0){const s=o.map(l=>`tools[${l}]`).join(", ");throw new Error(`Incompatible tools found at ${s}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var s;let l;const a=[];if(o!=null&&o.generatedImages)for(const d of o.generatedImages)d&&d!=null&&d.safetyAttributes&&((s=d==null?void 0:d.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=d==null?void 0:d.safetyAttributes:a.push(d);let c;return l?c={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:c={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},c}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new J(H.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var o,s,l,a,c,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&!((s=n.video)===null||s===void 0)&&s.videoBytes?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(l=n.source)===null||l===void 0?void 0:l.video)===null||a===void 0)&&a.uri&&!((d=(c=n.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.videoBytes&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,s;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=await Promise.all(l.map(async d=>W(d)?await d.tool():d)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(c.config.tools=a,e.config&&e.config.tools&&Cn(e.config.tools)){const d=(s=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},d);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),On(u),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return c}async initAfcToolsMap(e){var n,o,s;const l=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(W(a)){const c=a,d=await c.tool();for(const u of(s=d.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(l.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);l.set(u.name,c)}}return l}async processAfcStream(e){var n,o,s;const l=(s=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Wt;let a=!1,c=0;const d=await this.initAfcToolsMap(e);return(function(u,p,f){var h,m;return K(this,arguments,function*(){for(var y,b,g,v;c<l;){a&&(c++,a=!1);const S=yield R(u.processParamsMaybeAddMcpUsage(f)),T=yield R(u.generateContentStreamInternal(S)),x=[],M=[];try{for(var w=!0,_=(b=void 0,ee(T)),A;A=yield R(_.next()),y=A.done,!y;w=!0){v=A.value,w=!1;const I=v;if(yield yield R(I),I.candidates&&!((h=I.candidates[0])===null||h===void 0)&&h.content){M.push(I.candidates[0].content);for(const O of(m=I.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(c<l&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(O.functionCall.name)){const k=yield R(p.get(O.functionCall.name).callTool([O.functionCall]));x.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(I){b={error:I}}finally{try{!w&&!y&&(g=_.return)&&(yield R(g.call(_)))}finally{if(b)throw b.error}}if(x.length>0){a=!0;const I=new Q;I.candidates=[{content:{role:"user",parts:x}}],yield yield R(I);const O=[];O.push(...M),O.push({role:"user",parts:x});const k=U(f.contents).concat(O);f.contents=k}else break}})})(this,d,e)}async generateContentInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Vt(this.apiClient,e);return c=E("{model}:generateContent",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=$t(p),h=new Q;return Object.assign(h,f),h})}else{const u=Bt(this.apiClient,e);return c=E("{model}:generateContent",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Jt(p),h=new Q;return Object.assign(h,f),h})}}async generateContentStreamInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Vt(this.apiClient,e);return c=E("{model}:streamGenerateContent?alt=sse",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return K(this,arguments,function*(){var f,h,m,y;try{for(var b=!0,g=ee(p),v;v=yield R(g.next()),f=v.done,!f;b=!0){y=v.value,b=!1;const w=y,_=$t(yield R(w.json()));_.sdkHttpResponse={headers:w.headers};const A=new Q;Object.assign(A,_),yield yield R(A)}}catch(w){h={error:w}}finally{try{!b&&!f&&(m=g.return)&&(yield R(m.call(g)))}finally{if(h)throw h.error}}})})}else{const u=Bt(this.apiClient,e);return c=E("{model}:streamGenerateContent?alt=sse",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return K(this,arguments,function*(){var f,h,m,y;try{for(var b=!0,g=ee(p),v;v=yield R(g.next()),f=v.done,!f;b=!0){y=v.value,b=!1;const w=y,_=Jt(yield R(w.json()));_.sdkHttpResponse={headers:w.headers};const A=new Q;Object.assign(A,_),yield yield R(A)}}catch(w){h={error:w}}finally{try{!b&&!f&&(m=g.return)&&(yield R(m.call(g)))}finally{if(h)throw h.error}}})})}}async embedContent(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Bs(this.apiClient,e);return c=E("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Js(p),h=new xt;return Object.assign(h,f),h})}else{const u=Fs(this.apiClient,e);return c=E("{model}:batchEmbedContents",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Vs(p),h=new xt;return Object.assign(h,f),h})}}async generateImagesInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=er(this.apiClient,e);return c=E("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=nr(p),h=new Ct;return Object.assign(h,f),h})}else{const u=Qs(this.apiClient,e);return c=E("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=tr(p),h=new Ct;return Object.assign(h,f),h})}}async editImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const c=qs(this.apiClient,e);return l=E("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const u=Gs(d),p=new eo;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const c=Zr(this.apiClient,e);return l=E("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const u=Xr(d),p=new to;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const c=kr(this.apiClient,e);return l=E("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const u=Lr(d),p=new no;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const c=jr(this.apiClient,e);return l=E("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const u=Hr(d),p=new oo;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=br(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>be(p))}else{const u=yr(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>ye(p))}}async listInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Tr(this.apiClient,e);return c=E("{models_url}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Cr(p),h=new Ot;return Object.assign(h,f),h})}else{const u=Sr(this.apiClient,e);return c=E("{models_url}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=xr(p),h=new Ot;return Object.assign(h,f),h})}}async update(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Wr(this.apiClient,e);return c=E("{model}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>be(p))}else{const u=Kr(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>ye(p))}}async delete(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Ls(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Ds(p),h=new Rt;return Object.assign(h,f),h})}else{const u=ks(this.apiClient,e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Ms(p),h=new Rt;return Object.assign(h,f),h})}}async countTokens(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Rs(this.apiClient,e);return c=E("{model}:countTokens",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Ps(p),h=new Nt;return Object.assign(h,f),h})}else{const u=Os(this.apiClient,e);return c=E("{model}:countTokens",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Ns(p),h=new Nt;return Object.assign(h,f),h})}}async computeTokens(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const c=_s(this.apiClient,e);return l=E("{model}:computeTokens",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>{const u=As(d),p=new io;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=ar(this.apiClient,e);return c=E("{model}:predictLongRunning",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const f=rr(p),h=new se;return Object.assign(h,f),h})}else{const u=lr(this.apiClient,e);return c=E("{model}:predictLongRunning",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a.then(p=>{const f=sr(p),h=new se;return Object.assign(h,f),h})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class Nl extends F{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Kn(e);return c=E("{operationName}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a}else{const u=Yn(e);return c=E("{operationName}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const c=jn(e);return l=E("{resourceName}:fetchPredictOperation",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Pl(t){const e={},n=i(t,["data"]);if(n!=null&&r(e,["data"],n),i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function kl(t){const e={},n=i(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Hl(l))),r(e,["parts"],s)}const o=i(t,["role"]);return o!=null&&r(e,["role"],o),e}function Ll(t,e,n){const o={},s=i(e,["expireTime"]);n!==void 0&&s!=null&&r(n,["expireTime"],s);const l=i(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&r(n,["newSessionExpireTime"],l);const a=i(e,["uses"]);n!==void 0&&a!=null&&r(n,["uses"],a);const c=i(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&r(n,["bidiGenerateContentSetup"],jl(t,c));const d=i(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&r(n,["fieldMask"],d),o}function Ml(t,e){const n={},o=i(e,["config"]);return o!=null&&r(n,["config"],Ll(t,o,n)),n}function Dl(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&r(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&r(e,["mimeType"],o),e}function Ul(t){const e={};if(i(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=i(t,["enableWidget"]);return n!=null&&r(e,["enableWidget"],n),e}function ql(t){const e={};if(i(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(i(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=i(t,["timeRangeFilter"]);return n!=null&&r(e,["timeRangeFilter"],n),e}function Gl(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&r(e,["setup","generationConfig"],o);const s=i(t,["responseModalities"]);e!==void 0&&s!=null&&r(e,["setup","generationConfig","responseModalities"],s);const l=i(t,["temperature"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&r(e,["setup","generationConfig","topP"],a);const c=i(t,["topK"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","topK"],c);const d=i(t,["maxOutputTokens"]);e!==void 0&&d!=null&&r(e,["setup","generationConfig","maxOutputTokens"],d);const u=i(t,["mediaResolution"]);e!==void 0&&u!=null&&r(e,["setup","generationConfig","mediaResolution"],u);const p=i(t,["seed"]);e!==void 0&&p!=null&&r(e,["setup","generationConfig","seed"],p);const f=i(t,["speechConfig"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","speechConfig"],Ce(f));const h=i(t,["thinkingConfig"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","thinkingConfig"],h);const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=i(t,["systemInstruction"]);e!==void 0&&y!=null&&r(e,["setup","systemInstruction"],kl(D(y)));const b=i(t,["tools"]);if(e!==void 0&&b!=null){let T=Z(b);Array.isArray(T)&&(T=T.map(x=>Bl(z(x)))),r(e,["setup","tools"],T)}const g=i(t,["sessionResumption"]);e!==void 0&&g!=null&&r(e,["setup","sessionResumption"],Fl(g));const v=i(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&r(e,["setup","inputAudioTranscription"],v);const w=i(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&r(e,["setup","outputAudioTranscription"],w);const _=i(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&r(e,["setup","realtimeInputConfig"],_);const A=i(t,["contextWindowCompression"]);e!==void 0&&A!=null&&r(e,["setup","contextWindowCompression"],A);const S=i(t,["proactivity"]);return e!==void 0&&S!=null&&r(e,["setup","proactivity"],S),n}function jl(t,e){const n={},o=i(e,["model"]);o!=null&&r(n,["setup","model"],C(t,o));const s=i(e,["config"]);return s!=null&&r(n,["config"],Gl(s,n)),n}function Hl(t){const e={},n=i(t,["functionCall"]);n!=null&&r(e,["functionCall"],n);const o=i(t,["codeExecutionResult"]);o!=null&&r(e,["codeExecutionResult"],o);const s=i(t,["executableCode"]);s!=null&&r(e,["executableCode"],s);const l=i(t,["fileData"]);l!=null&&r(e,["fileData"],Dl(l));const a=i(t,["functionResponse"]);a!=null&&r(e,["functionResponse"],a);const c=i(t,["inlineData"]);c!=null&&r(e,["inlineData"],Pl(c));const d=i(t,["text"]);d!=null&&r(e,["text"],d);const u=i(t,["thought"]);u!=null&&r(e,["thought"],u);const p=i(t,["thoughtSignature"]);p!=null&&r(e,["thoughtSignature"],p);const f=i(t,["videoMetadata"]);return f!=null&&r(e,["videoMetadata"],f),e}function Fl(t){const e={},n=i(t,["handle"]);if(n!=null&&r(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Bl(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(f=>f)),r(e,["functionDeclarations"],p)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearchRetrieval"]);o!=null&&r(e,["googleSearchRetrieval"],o);const s=i(t,["computerUse"]);s!=null&&r(e,["computerUse"],s);const l=i(t,["fileSearch"]);l!=null&&r(e,["fileSearch"],l);const a=i(t,["codeExecution"]);if(a!=null&&r(e,["codeExecution"],a),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=i(t,["googleMaps"]);c!=null&&r(e,["googleMaps"],Ul(c));const d=i(t,["googleSearch"]);d!=null&&r(e,["googleSearch"],ql(d));const u=i(t,["urlContext"]);return u!=null&&r(e,["urlContext"],u),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Vl(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const s=Object.keys(o).map(l=>`${n}.${l}`);e.push(...s)}else e.push(n)}return e.join(",")}function Jl(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const l=Vl(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(u=>a.includes(u)?`generationConfig.${u}`:u));const d=[];l&&d.push(l),c.length>0&&d.push(...c),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class $l extends F{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=Ml(this.apiClient,e);l=E("auth_tokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query;const d=Jl(c,e.config);return s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),s.then(u=>u)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function Yl(t,e){const n={},o=i(t,["displayName"]);return e!==void 0&&o!=null&&r(e,["displayName"],o),n}function Kl(t){const e={},n=i(t,["config"]);return n!=null&&Yl(n,e),e}function Wl(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&r(e,["_query","force"],o),n}function zl(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&Wl(o,e),e}function Zl(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["_url","name"],n),e}function Xl(t,e){const n={},o=i(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["customMetadata"],l)}const s=i(t,["chunkingConfig"]);return e!==void 0&&s!=null&&r(e,["chunkingConfig"],s),n}function Ql(t){const e={},n=i(t,["name"]);n!=null&&r(e,["name"],n);const o=i(t,["metadata"]);o!=null&&r(e,["metadata"],o);const s=i(t,["done"]);s!=null&&r(e,["done"],s);const l=i(t,["error"]);l!=null&&r(e,["error"],l);const a=i(t,["response"]);return a!=null&&r(e,["response"],ta(a)),e}function ea(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&r(e,["_url","file_search_store_name"],n);const o=i(t,["fileName"]);o!=null&&r(e,["fileName"],o);const s=i(t,["config"]);return s!=null&&Xl(s,e),e}function ta(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["parent"]);o!=null&&r(e,["parent"],o);const s=i(t,["documentName"]);return s!=null&&r(e,["documentName"],s),e}function na(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function oa(t){const e={},n=i(t,["config"]);return n!=null&&na(n,e),e}function ia(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["fileSearchStores"],l)}return e}function sa(t,e){const n={},o=i(t,["mimeType"]);e!==void 0&&o!=null&&r(e,["mimeType"],o);const s=i(t,["displayName"]);e!==void 0&&s!=null&&r(e,["displayName"],s);const l=i(t,["customMetadata"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>d)),r(e,["customMetadata"],c)}const a=i(t,["chunkingConfig"]);return e!==void 0&&a!=null&&r(e,["chunkingConfig"],a),n}function ra(t){const e={},n=i(t,["fileSearchStoreName"]);n!=null&&r(e,["_url","file_search_store_name"],n);const o=i(t,["config"]);return o!=null&&sa(o,e),e}function la(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&r(e,["sdkHttpResponse"],n),e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function aa(t,e){const n={},o=i(t,["force"]);return e!==void 0&&o!=null&&r(e,["_query","force"],o),n}function ca(t){const e={},n=i(t,["name"]);n!=null&&r(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&aa(o,e),e}function ua(t){const e={},n=i(t,["name"]);return n!=null&&r(e,["_url","name"],n),e}function da(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&r(e,["_query","pageSize"],o);const s=i(t,["pageToken"]);return e!==void 0&&s!=null&&r(e,["_query","pageToken"],s),n}function pa(t){const e={},n=i(t,["parent"]);n!=null&&r(e,["_url","parent"],n);const o=i(t,["config"]);return o!=null&&da(o,e),e}function fa(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&r(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&r(e,["nextPageToken"],o);const s=i(t,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),r(e,["documents"],l)}return e}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ha extends F{constructor(e){super(),this.apiClient=e,this.list=async n=>new J(H.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ua(e);return l=E("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ca(e);s=E("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pa(e);return l=E("{parent}/documents",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const u=fa(d),p=new so;return Object.assign(p,u),p})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class ma extends F{constructor(e,n=new ha(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new J(H.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Kl(e);return l=E("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Zl(e);return l=E("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var n,o;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zl(e);s=E("{name}",a._url),l=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oa(e);return l=E("fileSearchStores",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const u=ia(d),p=new ro;return Object.assign(p,u),p})}}async uploadToFileSearchStoreInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ra(e);return l=E("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const u=la(d),p=new lo;return Object.assign(p,u),p})}}async importFile(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ea(e);return l=E("{file_search_store_name}:importFile",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{const u=Ql(d),p=new Ae;return Object.assign(p,u),p})}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/function ga(t,e){const n={},o=i(t,["name"]);return o!=null&&r(n,["_url","name"],o),n}function va(t,e){const n={},o=i(t,["name"]);return o!=null&&r(n,["_url","name"],o),n}function ya(t,e,n){const o={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=i(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&r(e,["displayName"],s),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=i(t,["epochCount"]);e!==void 0&&l!=null&&r(e,["tuningTask","hyperparameters","epochCount"],l);const a=i(t,["learningRateMultiplier"]);if(a!=null&&r(o,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=i(t,["batchSize"]);e!==void 0&&c!=null&&r(e,["tuningTask","hyperparameters","batchSize"],c);const d=i(t,["learningRate"]);if(e!==void 0&&d!=null&&r(e,["tuningTask","hyperparameters","learningRate"],d),i(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(i(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function ba(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const m=i(t,["validationDataset"]);e!==void 0&&m!=null&&r(e,["supervisedTuningSpec"],Qt(m))}else if(s==="PREFERENCE_TUNING"){const m=i(t,["validationDataset"]);e!==void 0&&m!=null&&r(e,["preferenceOptimizationSpec"],Qt(m))}const l=i(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&r(e,["tunedModelDisplayName"],l);const a=i(t,["description"]);e!==void 0&&a!=null&&r(e,["description"],a);let c=i(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const m=i(t,["epochCount"]);e!==void 0&&m!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(c==="PREFERENCE_TUNING"){const m=i(t,["epochCount"]);e!==void 0&&m!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let d=i(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const m=i(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(d==="PREFERENCE_TUNING"){const m=i(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let u=i(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const m=i(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(u==="PREFERENCE_TUNING"){const m=i(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&r(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let p=i(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const m=i(t,["adapterSize"]);e!==void 0&&m!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(p==="PREFERENCE_TUNING"){const m=i(t,["adapterSize"]);e!==void 0&&m!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=i(t,["labels"]);e!==void 0&&f!=null&&r(e,["labels"],f);const h=i(t,["beta"]);return e!==void 0&&h!=null&&r(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),o}function Ea(t,e){const n={},o=i(t,["baseModel"]);o!=null&&r(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&r(n,["preTunedModel"],s);const l=i(t,["trainingDataset"]);l!=null&&Na(l);const a=i(t,["config"]);return a!=null&&ya(a,n),n}function wa(t,e){const n={},o=i(t,["baseModel"]);o!=null&&r(n,["baseModel"],o);const s=i(t,["preTunedModel"]);s!=null&&r(n,["preTunedModel"],s);const l=i(t,["trainingDataset"]);l!=null&&Pa(l,n,e);const a=i(t,["config"]);return a!=null&&ba(a,n,e),n}function _a(t,e){const n={},o=i(t,["name"]);return o!=null&&r(n,["_url","name"],o),n}function Aa(t,e){const n={},o=i(t,["name"]);return o!=null&&r(n,["_url","name"],o),n}function Ia(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(t,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),o}function Sa(t,e,n){const o={},s=i(t,["pageSize"]);e!==void 0&&s!=null&&r(e,["_query","pageSize"],s);const l=i(t,["pageToken"]);e!==void 0&&l!=null&&r(e,["_query","pageToken"],l);const a=i(t,["filter"]);return e!==void 0&&a!=null&&r(e,["_query","filter"],a),o}function Ta(t,e){const n={},o=i(t,["config"]);return o!=null&&Ia(o,n),n}function xa(t,e){const n={},o=i(t,["config"]);return o!=null&&Sa(o,n),n}function Ca(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&r(n,["nextPageToken"],s);const l=i(t,["tunedModels"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Rn(c))),r(n,["tuningJobs"],a)}return n}function Oa(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["nextPageToken"]);s!=null&&r(n,["nextPageToken"],s);const l=i(t,["tuningJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>we(c))),r(n,["tuningJobs"],a)}return n}function Ra(t,e){const n={},o=i(t,["name"]);o!=null&&r(n,["model"],o);const s=i(t,["name"]);return s!=null&&r(n,["endpoint"],s),n}function Na(t,e){const n={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=i(t,["examples"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),r(n,["examples","examples"],s)}return n}function Pa(t,e,n){const o={};let s=i(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=i(t,["gcsUri"]);e!==void 0&&a!=null&&r(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let l=i(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(l==="PREFERENCE_TUNING"){const a=i(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&r(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Rn(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&r(n,["name"],s);const l=i(t,["state"]);l!=null&&r(n,["state"],dn(l));const a=i(t,["createTime"]);a!=null&&r(n,["createTime"],a);const c=i(t,["tuningTask","startTime"]);c!=null&&r(n,["startTime"],c);const d=i(t,["tuningTask","completeTime"]);d!=null&&r(n,["endTime"],d);const u=i(t,["updateTime"]);u!=null&&r(n,["updateTime"],u);const p=i(t,["description"]);p!=null&&r(n,["description"],p);const f=i(t,["baseModel"]);f!=null&&r(n,["baseModel"],f);const h=i(t,["_self"]);return h!=null&&r(n,["tunedModel"],Ra(h)),n}function we(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&r(n,["name"],s);const l=i(t,["state"]);l!=null&&r(n,["state"],dn(l));const a=i(t,["createTime"]);a!=null&&r(n,["createTime"],a);const c=i(t,["startTime"]);c!=null&&r(n,["startTime"],c);const d=i(t,["endTime"]);d!=null&&r(n,["endTime"],d);const u=i(t,["updateTime"]);u!=null&&r(n,["updateTime"],u);const p=i(t,["error"]);p!=null&&r(n,["error"],p);const f=i(t,["description"]);f!=null&&r(n,["description"],f);const h=i(t,["baseModel"]);h!=null&&r(n,["baseModel"],h);const m=i(t,["tunedModel"]);m!=null&&r(n,["tunedModel"],m);const y=i(t,["preTunedModel"]);y!=null&&r(n,["preTunedModel"],y);const b=i(t,["supervisedTuningSpec"]);b!=null&&r(n,["supervisedTuningSpec"],b);const g=i(t,["preferenceOptimizationSpec"]);g!=null&&r(n,["preferenceOptimizationSpec"],g);const v=i(t,["tuningDataStats"]);v!=null&&r(n,["tuningDataStats"],v);const w=i(t,["encryptionSpec"]);w!=null&&r(n,["encryptionSpec"],w);const _=i(t,["partnerModelTuningSpec"]);_!=null&&r(n,["partnerModelTuningSpec"],_);const A=i(t,["customBaseModel"]);A!=null&&r(n,["customBaseModel"],A);const S=i(t,["experiment"]);S!=null&&r(n,["experiment"],S);const T=i(t,["labels"]);T!=null&&r(n,["labels"],T);const x=i(t,["outputUri"]);x!=null&&r(n,["outputUri"],x);const M=i(t,["pipelineJob"]);M!=null&&r(n,["pipelineJob"],M);const I=i(t,["serviceAccount"]);I!=null&&r(n,["serviceAccount"],I);const O=i(t,["tunedModelDisplayName"]);O!=null&&r(n,["tunedModelDisplayName"],O);const k=i(t,["veoTuningSpec"]);return k!=null&&r(n,["veoTuningSpec"],k),n}function ka(t,e){const n={},o=i(t,["sdkHttpResponse"]);o!=null&&r(n,["sdkHttpResponse"],o);const s=i(t,["name"]);s!=null&&r(n,["name"],s);const l=i(t,["metadata"]);l!=null&&r(n,["metadata"],l);const a=i(t,["done"]);a!=null&&r(n,["done"],a);const c=i(t,["error"]);return c!=null&&r(n,["error"],c),n}function Qt(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&r(n,["validationDatasetUri"],o);const s=i(t,["vertexDatasetResource"]);return s!=null&&r(n,["validationDatasetUri"],s),n}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class La extends F{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new J(H.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},n),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),l=await this.tuneMldevInternal(s);let a="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?a=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(a=l.name.split("/operations/")[0]),{name:a,state:he.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=Aa(e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>we(p))}else{const u=_a(e);return c=E("{name}",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>Rn(p))}}async listInternal(e){var n,o,s,l;let a,c="",d={};if(this.apiClient.isVertexAI()){const u=xa(e);return c=E("tuningJobs",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Oa(p),h=new Pt;return Object.assign(h,f),h})}else{const u=Ta(e);return c=E("tunedModels",u._url),d=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(p=>p.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:p.headers},h})),a.then(p=>{const f=Ca(p),h=new Pt;return Object.assign(h,f),h})}}async cancel(e){var n,o,s,l;let a="",c={};if(this.apiClient.isVertexAI()){const d=va(e);a=E("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const d=ga(e);a=E("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI()){const c=wa(e,e);return l=E("tuningJobs",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>we(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let s,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Ea(e);return l=E("tunedModels",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:d.headers},p})),s.then(d=>ka(d))}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class Ma{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Da=1024*1024*8,Ua=3,qa=1e3,Ga=2,le="x-goog-upload-status";async function ja(t,e,n){var o;const s=await Nn(t,e,n),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[le])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function Ha(t,e,n){var o;const s=await Nn(t,e,n),l=await(s==null?void 0:s.json());if(((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[le])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=sn(l),c=new Ie;return Object.assign(c,a),c}async function Nn(t,e,n){var o,s;let l=0,a=0,c=new me(new Response),d="upload";for(l=t.size;a<l;){const u=Math.min(Da,l-a),p=t.slice(a,a+u);a+u>=l&&(d+=", finalize");let f=0,h=qa;for(;f<Ua&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(u)}}}),!(!((o=c==null?void 0:c.headers)===null||o===void 0)&&o[le]));)f++,await Ba(h),h=h*Ga;if(a+=u,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[le])!=="active")break;if(l<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function Fa(t){return{size:t.size,type:t.type}}function Ba(t){return new Promise(e=>setTimeout(e,t))}class Va{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ja(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ha(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Fa(e)}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/class Ja{create(e,n,o){return new $a(e,n,o)}}class $a{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const en="x-goog-api-key";class Ya{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(en)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(en,this.apiKey)}}}/**
* @license
* Copyright 2025 Google LLC
* SPDX-License-Identifier: Apache-2.0
*/const Ka="gl-node/";class Wa{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=qn(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const s=new Ya(this.apiKey);this.apiClient=new dl({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Ka+"web",uploader:new Va,downloader:new Ma}),this.models=new Rl(this.apiClient),this.live=new Il(this.apiClient,s,new Ja),this.batches=new ui(this.apiClient),this.chats=new Fi(this.models,this.apiClient),this.caches=new Gi(this.apiClient),this.files=new Xi(this.apiClient),this.operations=new Nl(this.apiClient),this.authTokens=new $l(this.apiClient),this.tunings=new La(this.apiClient),this.fileSearchStores=new ma(this.apiClient)}}const za={gapTopics:[{title:"Outer Space Treaty (1967)",details:"The Outer Space Treaty is the foundation of space law, but it was written long before AI. It doesn't address autonomous decision-making, leaving a gap in accountability when an AI causes an incident.",imagePrompt:"An old, yellowed scroll representing the treaty, with a glowing, digital neural network pattern spreading across it, causing cracks."},{title:"Current Laws/Guidelines",details:'Current regulations are a mix of national laws and non-binding international "soft laws." This patchwork approach creates inconsistencies and loopholes, failing to provide a clear, unified framework for AI governance in space.',imagePrompt:"A tangled knot of different colored ropes and wires, with some frayed and broken ends, failing to contain a central, glowing AI core."},{title:"Current uses of AI",details:"AI is already essential for satellite navigation, earth observation data analysis, and rover autonomy. The rapid pace of this technological integration is far outstripping the slow development of international law and policy.",imagePrompt:"A sleek, futuristic satellite orbiting Earth, with visible data streams connecting it to a complex, glowing AI brain graphic."}],solutions:[{title:"Adaptive Governance Framework",description:""},{title:"Tech Diplomacy & Standards",description:""},{title:"Meaningful Human Control",description:""},{title:"Binding Legal Frameworks",description:""}]};async function Pn(){const t=new Wa({apiKey:"PLACEHOLDER_API_KEY"}),e={type:L.OBJECT,properties:{gapTopics:{type:L.ARRAY,description:"A list of exactly 3 topics about AI governance black holes in space law. The topics must be: 'Outer Space Treaty (1967)', 'Current Laws/Guidelines', and 'Current uses of AI'.",items:{type:L.OBJECT,properties:{title:{type:L.STRING,description:"The title of the topic."},details:{type:L.STRING,description:"A detailed paragraph explaining the topic."},imagePrompt:{type:L.STRING,description:"A short, descriptive prompt for a conceptual image."}},required:["title","details","imagePrompt"]}},solutions:{type:L.ARRAY,description:"A list of 4 solutions corresponding to 'Liability', 'Surveillance', 'Bias', and 'Unpredictable Autonomy'.",items:{type:L.OBJECT,properties:{title:{type:L.STRING,description:"A short title for the solution."},description:{type:L.STRING,description:"A detailed paragraph explaining the solution."}},required:["title","description"]}}},required:["gapTopics","solutions"]},n=a=>new Promise(c=>setTimeout(c,a)),o=3;let s=0,l=1e3;for(;s<o;)try{const a=await t.models.generateContent({model:"gemini-2.5-flash",contents:"Generate content for a poster on 'AI, Policy, Ethics & Space Law'. For 'gapTopics', provide exactly 3 entries for 'Outer Space Treaty (1967)', 'Current Laws/Guidelines', and 'Current uses of AI', including details and an image prompt. For 'solutions', provide exactly 4 solutions for 'Liability', 'Surveillance', 'Bias', and 'Unpredictable Autonomy'. Follow the schema precisely.",config:{responseMimeType:"application/json",responseSchema:e}}),c=JSON.parse(a.text.trim());if(!c.gapTopics||c.gapTopics.length<3)throw new Error("API did not return 3 gap topics.");if(!c.solutions||c.solutions.length<4)throw new Error("API did not return 4 solutions.");return c}catch(a){s++,console.error(`Error generating content (Attempt ${s}):`,a);const c=a instanceof Error?a.message:String(a);if(c.includes("429")||c.includes("RESOURCE_EXHAUSTED")){if(s>=o)throw new Error("API quota exceeded. Please check your plan or try again later.");await n(l),l*=2}else throw new Error("Failed to fetch or parse poster content from Gemini API.")}throw new Error("Failed to fetch poster content after multiple retries.")}const Za=Object.freeze(Object.defineProperty({__proto__:null,fallbackContent:za,generatePosterContent:Pn},Symbol.toStringTag,{value:"Module"}));function Xa(t){const e=document.getElementById(t);if(!e)return;const n=[{count:150,size:"1px",speed:.01},{count:70,size:"2px",speed:.025},{count:30,size:"3px",speed:.04}];n.forEach(o=>{const s=document.createElement("div");s.className="absolute left-0 right-0 h-[200%] top-[-50%]",s.style.transform="translateY(0px)",Array.from({length:o.count*2}).map(()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,animationDuration:`${Math.random()*5+3}s`,animationDelay:`${Math.random()*3}s`})).forEach(l=>{const a=document.createElement("div");a.className="absolute bg-white rounded-full",a.style.width=o.size,a.style.height=o.size,a.style.top=l.top,a.style.left=l.left,a.style.animation=`twinkle ${l.animationDuration} ease-in-out infinite`,a.style.animationDelay=l.animationDelay,s.appendChild(a)}),e.appendChild(s)}),window.addEventListener("scroll",()=>{window.requestAnimationFrame(()=>{const o=window.scrollY;e.childNodes.forEach((s,l)=>{s instanceof HTMLElement&&(s.style.transform=`translateY(${o*n[l].speed}px)`)})})},{passive:!0})}const kn=[{title:"1. The Liability Black Hole",description:` As AI systems take over critical tasks like autonomous rendezvous and docking, accidentssuch as satellite collisions or failed docking maneuverscan occur without clear human oversight.
 Current space law struggles to assign responsibility for these incidents.
 This creates a liability gap, leaving victims without justice and letting bad actors evade accountability.
 (Bratu et al., 2021; Martin & Freeland, 2021; Pagallo et al., 2023).`},{title:'2. Security Threats "Gravity"',description:` AI systems in space are vulnerable to cyberattacks, manipulation, and data breaches.
 Consequences: These vulnerabilities can severely impact space assets and terrestrial infrastructure.
 For example: A cyberattack manipulates an AI-controlled satellites navigation, causing it to collide with a critical communication satellite and disrupting global internet services for millions.
 (Weber & Franke, 2024; Oche et al., 2021; Thangavel et al., 2024; Gal et al., 2020)`},{title:'3. Built-in Bias "Inertia"',description:` AI-powered satellites capture and analyze high-resolution images worldwide without consent or oversight, enabling mass collection, processing, and sale of sensitive data with few safeguards or regulations.
 These AI systems inherit and amplify biases from training data, causing discriminatory outcomes like misidentification or disproportionate targeting of certain groups via space-based facial recognition.
 This deepens inequalities and enables unjust surveillance or enforcement actions.
 (Yazici, 2025; Ghamisi et al., 2024; Izzo & Campanile, 2024; Kochupillai, 2021).`},{title:'4. Unpredictable Autonomy "Cluster"',description:` Highly autonomous AI can make rapid, unpredictable and irreversible decisions without human intervention.
 This unpredictability in high-stakes hinders risk assessment and legal accountability.
 Humans may be powerless to prevent disasters caused by autonomous AI decisions.
 Absence of clear, enforceable standards raises issues of compliance, fairness, and protection of fundamental rights.
 (Graham et al., 2024; Thangavel et al., 2024; Gal et al., 2020; Pagallo et al., 2023; Martin & Freeland, 2021).`}];function Qa(t,e){const n=document.getElementById(t);if(!n)return;let o=null,s=!1;const l=["Liability","Security","Bias","Autonomy"],a=[{bg:"bg-slate-500",border:"border-slate-300",shadow:"shadow-slate-400/50",ping:"bg-slate-400",text:"text-white"},{bg:"bg-amber-200",border:"border-amber-100",shadow:"shadow-amber-300/50",ping:"bg-amber-100",text:"text-white"},{bg:"bg-sky-600",border:"border-sky-300",shadow:"shadow-sky-500/50",ping:"bg-sky-400",text:"text-white"},{bg:"bg-red-700",border:"border-red-400",shadow:"shadow-red-500/50",ping:"bg-red-500",text:"text-white"}],c=[{size:"w-64 h-64 md:w-80 md:h-80",duration:"30s"},{size:"w-80 h-80 md:w-[28rem] md:h-[28rem]",duration:"50s",delay:"-5s"},{size:"w-96 h-96 md:w-[36rem] md:h-[36rem]",duration:"75s",delay:"-15s"},{size:"w-[28rem] h-[28rem] md:w-[44rem] md:h-[44rem]",duration:"100s",delay:"-25s"}],d=g=>`
        <h4 class="mb-2 font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400">${g.title}</h4>
        <p class="text-sm text-gray-300 leading-relaxed whitespace-pre-line">${g.description}</p>
    `,u=`
        <div class="relative flex items-center justify-center w-full min-h-[500px] md:min-h-[800px]">
        <div id="problem-sun" role="button" tabindex="0" class="relative z-10 flex flex-col items-center justify-center w-40 h-40 text-center bg-gray-200 rounded-full cursor-pointer md:w-48 md:h-48 transition-transform hover:scale-105 animate-sun-glow">
            <h3 class="text-xl font-bold text-gray-800 md:text-2xl">AI Main Risks</h3>
        </div>
        ${e.map((g,v)=>`
            <div class="absolute rounded-full pointer-events-none orbit-trail ${c[v].size}" style="animation: spin ${c[v].duration} linear infinite; animation-delay: ${c[v].delay??"0s"}; z-index: ${20+(e.length-1-v)};">
            <div class="absolute" style="top: 50%; left: 0%; transform: translate(-50%, -50%);">
                <div class="pointer-events-auto w-20 h-20 md:w-24 md:h-24" style="animation: spin ${c[v].duration} linear infinite reverse; animation-delay: ${c[v].delay??"0s"};">
                <div class="planet-container relative flex items-center justify-center w-full h-full transition-transform duration-300 cursor-pointer" data-index="${v}">
                    <div class="ping-indicator absolute w-full h-full ${a[v].ping} rounded-full opacity-0"></div>
                    <div class="relative z-10 flex flex-col items-center justify-center w-16 h-16 p-1 text-center ${a[v].text} ${a[v].bg} border-2 ${a[v].border} rounded-full shadow-lg md:w-20 md:h-20 ${a[v].shadow}">
                    <span class="text-lg font-bold leading-tight md:text-xl">${v+1}</span>
                    <span class="mt-1 text-[10px] uppercase tracking-wider md:text-xs">${l[v]}</span>
                    </div>
                </div>
                <div class="tooltip absolute z-30 p-4 w-64 border rounded-lg shadow-xl border-purple-500/30 bg-black/50 backdrop-blur-md left-full ml-4 top-1/2 -translate-y-1/2 transition-all duration-300 ease-in-out opacity-0 scale-95 invisible">
                    ${d(g)}
                </div>
                </div>
            </div>
            </div>
        `).join("")}
        <div id="problem-grid-tooltips" class="absolute inset-0 z-30 grid grid-cols-2 grid-rows-2 gap-4 p-4 pointer-events-none invisible">
            ${e.map((g,v)=>`<div class="p-4 w-80 border rounded-lg shadow-xl border-purple-500/30 bg-black/50 backdrop-blur-md transition-all duration-300 ease-in-out pointer-events-auto opacity-0 scale-95 invisible ${["justify-self-start self-start","justify-self-end self-start","justify-self-start self-end","justify-self-end self-end"][v]}">${d(g)}</div>`).join("")}
        </div>
        </div>
    `,p=`
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
        ${e.map(g=>`
            <div class="flex flex-col p-6 border border-purple-500/20 bg-black/30 backdrop-blur-md rounded-xl shadow-lg shadow-purple-500/10 transition-all duration-300 hover:border-purple-500/50 hover:shadow-purple-500/20 hover:-translate-y-1">
            <div class="flex items-center gap-4 mb-3">
                <h3 class="text-xl font-semibold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400">${g.title}</h3>
            </div>
            <p class="text-gray-300 leading-relaxed text-base whitespace-pre-line">${g.description}</p>
            </div>
        `).join("")}
        </div>
    `;n.innerHTML=`
        <div class="animate-fade-in">
            <div class="hidden md:block">${u}</div>
            <div class="block md:hidden">${p}</div>
        </div>
    `;const f=n.querySelector("#problem-sun");if(!f)return;const h=n.querySelectorAll(".planet-container"),m=n.querySelector("#problem-grid-tooltips"),y=m.querySelectorAll(":scope > div");function b(g){s=g,m.classList.toggle("invisible",!g),y.forEach(v=>{v.classList.toggle("opacity-100",g),v.classList.toggle("scale-100",g),v.classList.toggle("visible",g),v.classList.toggle("opacity-0",!g),v.classList.toggle("scale-95",!g),v.classList.toggle("invisible",!g)})}f.addEventListener("click",()=>{o=null,h.forEach(g=>{g.classList.remove("scale-110"),g.querySelector(".ping-indicator").classList.add("opacity-0"),g.nextElementSibling.classList.add("opacity-0","scale-95","invisible"),g.nextElementSibling.classList.remove("opacity-100","scale-100","visible")}),b(!s)}),h.forEach(g=>{g.addEventListener("click",v=>{v.stopPropagation();const w=parseInt(g.dataset.index),_=g.nextElementSibling,A=g.querySelector(".ping-indicator");if(o===w)o=null,g.classList.remove("scale-110"),A.classList.add("opacity-0"),_.classList.add("opacity-0","scale-95","invisible"),_.classList.remove("opacity-100","scale-100","visible");else{if(o!==null){const S=n.querySelector(`.planet-container[data-index="${o}"]`);S.classList.remove("scale-110"),S.querySelector(".ping-indicator").classList.add("opacity-0"),S.nextElementSibling.classList.add("opacity-0","scale-95","invisible"),S.nextElementSibling.classList.remove("opacity-100","scale-100","visible")}o=w,s=!1,b(!1),g.classList.add("scale-110"),A.classList.remove("opacity-0"),_.classList.remove("opacity-0","scale-95","invisible"),_.classList.add("opacity-100","scale-100","visible")}})}),document.body.addEventListener("click",g=>{if(!n.contains(g.target)&&(b(!1),o!==null)){const v=n.querySelector(`.planet-container[data-index="${o}"]`);v&&(v.classList.remove("scale-110"),v.querySelector(".ping-indicator").classList.add("opacity-0"),v.nextElementSibling.classList.add("opacity-0","scale-95","invisible"),v.nextElementSibling.classList.remove("opacity-100","scale-100","visible"),o=null)}})}const P={image1:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_1-BU6HoM_l.jpg",import.meta.url).href,image2:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_2-BZXUa52n.jpg",import.meta.url).href,image3:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_3-C31cALbU.png",import.meta.url).href,image4:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_4-VLj9FAbO.jpg",import.meta.url).href,image5:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_5-2YhV1rp_.jpg",import.meta.url).href,image6:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_6-DHkW5A4h.png",import.meta.url).href,image7:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_7-BYqtGzCB.jpg",import.meta.url).href,image8:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_8-CW_ZrcuQ.jpg",import.meta.url).href,image9:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_9-wrJWSq-w.jpg",import.meta.url).href,image10:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_10-5ZQm6M65.png",import.meta.url).href,image11:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_11-CwQUjwwx.png",import.meta.url).href,image12:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_12-DnKrQvdO.jpeg",import.meta.url).href,image13:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_13-CaCMduTC.png",import.meta.url).href,image14:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_13-CaCMduTC.png",import.meta.url).href,image15:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_15-Dq4V6G9v.png",import.meta.url).href,image17:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_17-kOwiiIt4.png",import.meta.url).href,image18:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_18-DHOsslou.png",import.meta.url).href,image19:new URL("/spaceai/posters/AI_Policy_Ethics_and_Space_Law/assets/Image_19-CTGLTyvD.jpeg",import.meta.url).href},tn=[P.image1,P.image2,P.image3,P.image4,P.image5,P.image6,P.image7,P.image8,P.image9],nn=[P.image10,P.image11,P.image12],on=[P.image13,P.image14,P.image15,P.image18],ec={adaptive:P.image17,tech:P.image18,meaningful:P.image12,binding:P.image15},tc=P.image19;function te(t){return t.split("**").map((e,n)=>n%2===1?`<strong>${e}</strong>`:e).join("")}function nc(t,e){let n;if(t.title.includes("Outer Space Treaty")){const f=["- The exploration and use of outer space shall benefit all of mankind","- Outer space shall be free for exploration and use by all States","- Outer space is not subject to national appropriation by claim of sovereignty","- States shall not place nuclear weapons or weapons of mass destruction in outer space","- All celestial bodies shall be used exclusively for peaceful purposes","- Astronauts shall be regarded as the envoys of mankind","- States shall be responsible for governmental or non-governmental national space activities","- States shall be liable for damage caused by their space objects","- States shall avoid harmful contamination of space and celestial bodies"].join(`
`);t.details=f}else if(t.title.includes("Current Laws")){const f=[`**NASAss Framework for Ethical Use of Artificial Intelligence:**
Identifies 6 core principles that any AI system used by NASA should satisfy - fairness, explainability and transparency, accountability, security and safety, societally beneficial, scientifically and technically robust`,`**ESAs Missions Operations A2I Roadmap:**
Outlines how AI can be applied across mission operations in regards to automated health monitoring, decisions and planning, modelling and simulations, content and data generation, data handling and governance`,`**DLRs Institute for AI Safety and Security:**
Works on reliability and resilience, safety and security by design, transparency and traceability, data quality and governance, human-centricity and social acceptance`,"**Soft laws** are principles that aren't legally binding, but many space agencies have no publicly visible full AI ethics policy with a set of key principles let alone a legally binding framework for the use of AI"].join(`

`);t.details=f}else if(t.title.includes("Current uses of AI")){const f=[`**ESAS HERA PLANETARY DEFENSE MISSION:**
This mission will use AI to steer itself through asteroids, build a model of surroundings and make decisions onboard`,`**DLRS CIMON (CREW INTERACTIVE MOBILE COMPANION):**
An AI assistant that supports astronauts in daily tasks onboard the ISS. It is able to see, speak, hear, understand and even fly`,`**JAXAS EPSILON ROCKET:**
The first launch vehicle to incorporate an AI driven autonomous operation system for pre-launch decision making.`,`**JAXAS INT-BALL:**
An intelligent, free-flying, spherical camera drone with autonomous navigation and remote control to assist astronauts with routine photography tasks`].join(`

`);t.details=f}if(t.title.includes("Outer Space Treaty"))n=`<div class="space-y-4">${t.details.split(`
`).map(f=>f.trim()).filter(Boolean).map((f,h)=>`
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 py-4 border-b border-cyan-500/10 last:border-b-0">
                <p class="flex-1 text-base text-gray-300 sm:text-lg leading-relaxed">${f.replace(/^- /,"")}</p>
                <div class="flex flex-shrink-0 w-full sm:w-28 h-20 bg-white/5 border border-dashed border-cyan-500/30 rounded-md transition-colors hover:border-cyan-500/60 overflow-hidden">
                    <img src="${tn[h%tn.length]}" alt="Illustration for Outer Space Treaty principle ${h+1}" class="w-full h-full object-cover" />
                </div>
            </div>`).join("")}</div>`;else if(t.title.includes("Current Laws")){const f=t.details.split(`

`).filter(Boolean),h=f.slice(0,3).map((y,b)=>{const[g,...v]=y.split(`
`),w=nn[b%nn.length];return`
              <div class="relative p-4 overflow-hidden border rounded-lg bg-white/5 border-white/10">
                <div class="relative z-10 flex flex-col sm:flex-row gap-4 justify-between items-start">
                  <div class="flex-1">
                      <p class="text-lg font-bold text-cyan-200">${te(g)}</p>
                      <p class="mt-2 text-sm text-gray-300 sm:text-base">${te(v.join(`
`))}</p>
                  </div>
                   <div class="flex items-center justify-center flex-shrink-0 w-full sm:w-28 h-20 bg-white/5 border border-dashed border-cyan-500/30 rounded-md transition-colors hover:border-cyan-500/60 mt-2 sm:mt-0 overflow-hidden">
                      <img src="${w}" alt="${g.split(":")[0].replace(/\*\*/g,"")}" class="w-full h-full object-cover" />
                  </div>
                </div>
              </div>`}).join(""),m=f.length>3?`<div class="p-4 mt-4 border-l-2 border-purple-400 bg-purple-900/20"><p class="text-gray-300 italic">${te(f[3])}</p></div>`:"";n=`<div class="space-y-6">${h}${m}</div>`}else t.title.includes("Current uses of AI")?n=`<div class="grid grid-cols-1 gap-4 sm:grid-cols-2">${t.details.split(`

`).filter(Boolean).map((f,h)=>{const[m,...y]=f.split(`
`),b=on[h%on.length];return`
              <div class="p-5 bg-[#0c0a1d] border border-cyan-500/30 rounded-xl shadow-lg hover:shadow-cyan-500/20 transition-shadow duration-300 flex flex-col">
                <div class="flex-1">
                    <h4 class="font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-300 mb-2 leading-tight">${te(m)}</h4>
                    <p class="text-sm text-gray-300 leading-relaxed mb-4">${y.join(`
`)}</p>
                </div>
                <div class="w-full h-24 bg-white/5 border border-dashed border-cyan-500/30 rounded-md overflow-hidden">
                    <img src="${b}" alt="${m.split(":")[0].replace(/\*\*/g,"")}" class="w-full h-full object-cover" />
                </div>
              </div>`}).join("")}</div>`:n=`<div class="grid gap-6 md:grid-cols-2"><div class="space-y-4 text-base text-gray-300 sm:text-lg leading-relaxed">${t.details.split(`
`).map(f=>`<p>${f}</p>`).join("")}</div><div class="flex flex-col items-center justify-center p-4 border border-dashed rounded-lg border-gray-500/50 bg-black/20"><p class="mb-2 text-sm text-center text-gray-400">Conceptual Image:</p><p class="text-center text-gray-200 italic">"${t.imagePrompt}"</p></div></div>`;const o=`
        <div class="fixed inset-0 z-50 flex items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title-${t.title.replace(/\s/g,"-")}" >
          <div class="absolute inset-0 bg-transparent backdrop-blur-md modal-bg"></div>
          <div class="relative flex flex-col w-full max-w-2xl max-h-[90vh] bg-[#0c0a1d] border border-cyan-500/30 rounded-2xl shadow-[0_0_50px_rgba(103,232,249,0.15)] transform transition-all duration-300 ease-out scale-95 opacity-0 animate-fade-in-scale" style="animation-fill-mode: forwards">
            <div class="flex items-start justify-between flex-shrink-0 p-6 border-b sm:p-8 border-cyan-500/20">
                <h3 id="modal-title-${t.title.replace(/\s/g,"-")}" class="pr-8 text-xl font-bold text-transparent sm:text-2xl bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400">${t.title}</h3>
                <button class="flex-shrink-0 w-8 h-8 text-gray-400 transition-colors hover:text-white close-modal-btn" aria-label="Close">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-full h-full"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="p-6 sm:p-8 overflow-y-auto custom-scrollbar">${n}</div>
          </div>
        </div>`;e.innerHTML=o,document.body.classList.add("modal-open");const s=e.querySelector('[role="dialog"]'),l=Array.from(s.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')),a=l[0],c=l[l.length-1],d=f=>{f.key==="Tab"&&(f.shiftKey?document.activeElement===a&&(c.focus(),f.preventDefault()):document.activeElement===c&&(a.focus(),f.preventDefault()))},u=f=>{f.key==="Escape"&&p()},p=()=>{s.removeEventListener("keydown",d),window.removeEventListener("keydown",u),e.innerHTML="",document.body.classList.remove("modal-open")};s.addEventListener("keydown",d),window.addEventListener("keydown",u),a==null||a.focus(),s.querySelector(".close-modal-btn").addEventListener("click",p),s.querySelector(".modal-bg").addEventListener("click",p)}function oc(t,e,n){let o=!1;const s=`
        <div class="flex flex-col items-center gap-4 mb-8 text-center">
            <div class="w-16 h-16 text-cyan-300">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-full h-full"><path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" /></svg>
            </div>
            <h2 class="text-2xl font-bold text-transparent sm:text-3xl bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400">
                The Gaps: AI Governance Black Hole
            </h2>
            <p class="max-w-2xl mt-1 text-gray-400">Key challenges in current space law that create a governance vacuum for AI.</p>
        </div>
        <div class="flex flex-col items-center justify-center p-8 my-8 text-center border border-purple-500/20 bg-black/30 backdrop-blur-md rounded-xl shadow-lg shadow-purple-500/10">
            <p class="max-w-xl mb-8 text-lg text-gray-300">
                Explore the legal black hole where current regulations fail to capture the risks of autonomous systems in space.
            </p>
            <button id="explore-gaps-btn" class="px-8 py-3 font-bold text-white uppercase transition-all duration-300 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-lg shadow-lg hover:from-cyan-400 hover:to-purple-500 hover:shadow-cyan-500/50 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black focus:ring-cyan-400 animate-pulse-bounce">
                Explore Gaps
            </button>
        </div>
        <div id="gaps-diagram-content" class="collapsible-content"></div>
    `;t.innerHTML=s;const l=document.getElementById("explore-gaps-btn"),a=document.getElementById("gaps-diagram-content");l.addEventListener("click",()=>{o=!o,a.classList.toggle("expanded",o),l.textContent=o?"Hide Gaps":"Explore Gaps",l.classList.toggle("animate-pulse-bounce",!o)});const c=[n.find(f=>f.title.includes("Outer Space Treaty")),n.find(f=>f.title.includes("Current Laws")),n.find(f=>f.title.includes("Current uses of AI"))].filter(Boolean);function d(f){return f.includes("Outer Space Treaty")?["Outer Space","Treaty (1967)"]:f.includes("Current Laws")?["Current Laws","& Guidelines"]:f.includes("Current uses")?["Current Uses","of AI"]:f.split(" ")}const u=`
        <div class="animate-fade-in hidden md:block">
            <div class="relative flex items-center justify-center w-full p-4 py-12">
                <div class="relative w-full max-w-sm sm:max-w-md md:max-w-lg aspect-square">
                    <svg viewBox="0 0 300 300" class="w-full h-full relative z-10 overflow-visible">
                        <defs>
                            <radialGradient id="blackHoleGradient" cx="0.5" cy="0.5" r="0.5"><stop offset="0%" stop-color="#000000" /><stop offset="85%" stop-color="#000000" /><stop offset="100%" stop-color="#2d0a31" /></radialGradient>
                            <linearGradient id="accretionGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#22d3ee" stop-opacity="0.8" /><stop offset="50%" stop-color="#8b5cf6" stop-opacity="0.5" /><stop offset="100%" stop-color="#000000" stop-opacity="0" /></linearGradient>
                            <filter id="glow-strong"><feGaussianBlur stdDeviation="4" result="coloredBlur" /><feMerge><feMergeNode in="coloredBlur" /><feMergeNode in="SourceGraphic" /></feMerge></filter>
                            <filter id="glow-soft"><feGaussianBlur stdDeviation="2" result="blur" /><feComposite in="SourceGraphic" in2="blur" operator="over" /></filter>
                        </defs>
                        <g class="animate-spin-slow" style="transform-origin: 150px 150px;"><circle cx="150" cy="150" r="145" fill="url(#accretionGradient)" opacity="0.2" style="mix-blend-mode: screen;"></circle><circle cx="150" cy="150" r="120" stroke="url(#accretionGradient)" stroke-width="1" opacity="0.3" stroke-dasharray="10 20"></circle><circle cx="150" cy="150" r="100" stroke="purple" stroke-width="0.5" opacity="0.3"></circle></g>
                        <circle cx="150" cy="150" r="73" fill="url(#blackHoleGradient)" filter="url(#glow-soft)"></circle>
                        <circle cx="150" cy="150" r="75" fill="none" stroke="#22d3ee" class="animate-photon-ring" filter="url(#glow-strong)"></circle>
                        <text x="150" y="150" text-anchor="middle" dy=".3em" class="font-bold text-transparent fill-white/90 tracking-[0.3em] text-lg pointer-events-none drop-shadow-[0_0_10px_rgba(255,255,255,0.8)]">GAPS</text>
                        
                        ${c.map((f,h)=>{const m=h*120,y=d(f.title),b=-30*(Math.PI/180),g=115,v=150+g*Math.cos(b),w=150+g*Math.sin(b),_=-m;return`
                            <g class="cursor-pointer gap-segment" transform="rotate(${m} 150 150)" data-index="${h}" role="button" tabindex="0">
                                <g style="animation: hover-float 6s ease-in-out infinite; animation-delay: ${h*-2}s">
                                    <g class="group transition-all duration-500 hover:filter hover:drop-shadow-[0_0_15px_rgba(34,211,238,0.6)]">
                                        <title>${f.title}</title>
                                        <path d="M 150 2 A 148 148 0 0 1 278.2 224 L 215 187.5 A 75 75 0 0 0 150 75 Z" class="fill-transparent stroke-cyan-500/30 stroke-[1px] transition-all duration-300 group-hover:stroke-cyan-300 group-hover:stroke-[2px] group-hover:fill-cyan-500/10"></path>
                                        <g transform="rotate(${_} ${v} ${w})">
                                            <text x="${v}" y="${w}" text-anchor="middle" class="text-xs font-bold tracking-wider text-cyan-100 uppercase transition-all duration-300 fill-current sm:text-sm group-hover:text-white group-hover:drop-shadow-[0_0_5px_black]" style="pointer-events: none;">
                                                ${y.map((A,S)=>{const T=-(y.length-1)/2*1.2,x=S===0?`${T}em`:`${1.2}em`;return`<tspan x="${v}" dy="${x}">${A}</tspan>`}).join("")}
                                            </text>
                                        </g>
                                    </g>
                                </g>
                            </g>
                            `}).join("")}
                    </svg>
                </div>
            </div>
        </div>`,p=`
        <div class="animate-fade-in block md:hidden space-y-4">
            ${c.map((f,h)=>`
                <button class="w-full p-6 text-left bg-black/30 border border-purple-500/20 rounded-lg shadow-lg hover:bg-black/50 hover:border-purple-500/50 transition-all duration-300" data-index="${h}">
                    <h3 class="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400">${f.title}</h3>
                </button>
            `).join("")}
        </div>
    `;a.innerHTML=`<div>${u}${p}</div>`,a.querySelectorAll("[data-index]").forEach(f=>{f.addEventListener("click",()=>{const h=parseInt(f.dataset.index);nc(c[h],e)})})}const ic=["adaptive","tech","meaningful","binding"];function sc(t){const e=t.toLowerCase(),n=ic.find(o=>e.includes(o));return n?ec[n]:null}function rc(t,e){let n="";const o=sc(t.title);o?n=`
            <div class="flex flex-col gap-6">
                <div>
                    <h3 class="text-2xl sm:text-3xl pr-8 text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400 mb-6" id="modal-title-${t.title.replace(/\s/g,"-")}">${t.title}</h3>
                    <p class="text-lg sm:text-xl text-gray-300 leading-relaxed whitespace-pre-line">${t.description}</p>
                </div>
                <div class="w-full h-48 bg-white/5 border border-dashed border-cyan-500/30 rounded-xl flex items-center justify-center overflow-hidden shadow-lg">
                    <img src="${o}" alt="Conceptual image for ${t.title}" class="w-full h-full object-cover" />
                </div>
            </div>`:n=`
            <h3 class="text-2xl sm:text-3xl pr-8 text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400 mb-4" id="modal-title-${t.title.replace(/\s/g,"-")}">${t.title}</h3>
            <p class="text-lg sm:text-xl text-gray-300 leading-relaxed whitespace-pre-line">${t.description}</p>`;const s=`
        <div class="fixed inset-0 z-50 flex items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title-${t.title.replace(/\s/g,"-")}">
            <div class="absolute inset-0 bg-black/70 backdrop-blur-sm modal-bg"></div>
            <div class="relative w-full max-w-4xl p-8 sm:p-12 bg-gradient-to-br from-[#100a2d] to-[#0c0a1d] border-2 border-cyan-500/30 rounded-xl shadow-2xl shadow-cyan-500/20 transform transition-all duration-300 ease-out scale-95 opacity-0 animate-fade-in-scale" style="animation-fill-mode: forwards">
            <button class="absolute top-4 right-4 w-8 h-8 text-gray-400 transition-colors hover:text-white close-modal-btn" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-full h-full"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>
            </button>
            ${n}
            </div>
        </div>`;e.innerHTML=s,document.body.classList.add("modal-open");const l=e.querySelector('[role="dialog"]'),a=Array.from(l.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')),c=a[0],d=a[a.length-1],u=h=>{h.key==="Tab"&&(h.shiftKey?document.activeElement===c&&(d.focus(),h.preventDefault()):document.activeElement===d&&(c.focus(),h.preventDefault()))},p=h=>{h.key==="Escape"&&f()},f=()=>{l.removeEventListener("keydown",u),window.removeEventListener("keydown",p),e.innerHTML="",document.body.classList.remove("modal-open")};l.addEventListener("keydown",u),window.addEventListener("keydown",p),c==null||c.focus(),l.querySelector(".close-modal-btn").addEventListener("click",f),l.querySelector(".modal-bg").addEventListener("click",f)}function lc(t,e,n){let o=!1;const s=`
        <div class="flex flex-col items-center gap-4 mb-16 text-center">
            <div class="w-16 h-16 text-cyan-300">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-full h-full"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.311a7.5 7.5 0 0 1-7.5 0c-1.255 0-2.42-.154-3.563-.437m7.126 12.911a7.5 7.5 0 0 1 7.5 0c1.255 0 2.42.154 3.563.437m-18.126-3.563a12.06 12.06 0 0 1 4.5 0m-3.75-2.311a7.5 7.5 0 0 1 7.5 0c1.255 0 2.42.154 3.563.437m-7.126-12.911a7.5 7.5 0 0 1 7.5 0" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 18a.75.75 0 0 0 .75-.75V11.25a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 .75.75Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 6.75a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M6.375 9.75a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M16.875 9.75a.75.75 0 0 0 0 1.5h.75a.75.75 0 0 0 0-1.5h-.75Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M9 3.75a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5h-6Z" /></svg>
            </div>
            <h2 class="text-2xl font-bold text-transparent sm:text-3xl bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400">The Solutions: Charting a New Course</h2>
            <p class="max-w-2xl mt-1 text-gray-400">Deployable strategies to safeguard the future of space operations.</p>
        </div>
        <div class="flex flex-col items-center justify-center p-8 my-8 text-center border border-purple-500/20 bg-black/30 backdrop-blur-md rounded-xl shadow-lg shadow-purple-500/10">
            <p class="max-w-xl mb-8 text-lg text-gray-300">To address these critical risks, a multi-faceted framework is required, blending legal reforms, technical standards, and international cooperation to ensure AI is a force for good in space.</p>
            <button id="explore-solutions-btn" class="px-8 py-3 font-bold text-white uppercase transition-all duration-300 bg-gradient-to-r from-cyan-500 to-purple-600 rounded-lg shadow-lg hover:from-cyan-400 hover:to-purple-500 hover:shadow-cyan-500/50 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black focus:ring-cyan-400 animate-pulse-bounce">
                Explore Solutions
            </button>
        </div>
        <div id="solutions-diagram-content" class="collapsible-content"></div>
    `;t.innerHTML=s;const l=document.getElementById("explore-solutions-btn"),a=document.getElementById("solutions-diagram-content");l.addEventListener("click",()=>{o=!o,a.classList.toggle("expanded",o),l.textContent=o?"Hide Solutions":"Explore Solutions",l.classList.toggle("animate-pulse-bounce",!o)});const c=["Liability","Security","Bias","Autonomy"],d=[{bg:"bg-slate-500",border:"border-slate-300",shadow:"shadow-slate-400/50",text:"text-white"},{bg:"bg-amber-200",border:"border-amber-100",shadow:"shadow-amber-300/50",text:"text-white"},{bg:"bg-sky-600",border:"border-sky-300",shadow:"shadow-sky-500/50",text:"text-white"},{bg:"bg-red-700",border:"border-red-400",shadow:"shadow-red-500/50",text:"text-white"}],u=[{size:"w-64 h-64 md:w-80 md:h-80",duration:"30s",delay:"0s"},{size:"w-80 h-80 md:w-[28rem] md:h-[28rem]",duration:"50s",delay:"-5s"},{size:"w-96 h-96 md:w-[36rem] md:h-[36rem]",duration:"75s",delay:"-15s"},{size:"w-[28rem] h-[28rem] md:w-[44rem] md:h-[44rem]",duration:"100s",delay:"-25s"}],p=`
        <div class="animate-fade-in hidden md:block">
            <div class="relative flex items-center justify-center w-full min-h-[500px] md:min-h-[800px]">
            <div id="solution-sun" role="button" tabindex="0" class="relative z-10 flex flex-col items-center justify-center w-40 h-40 text-center bg-gray-200 rounded-full cursor-pointer md:w-48 md:h-48 animate-sun-glow transition-transform hover:scale-105 animate-pop-bounce">
                <h3 class="text-xl font-bold text-gray-800 md:text-2xl">Solutions Framework</h3>
            </div>
            ${kn.map((g,v)=>{const w=d[v],_=`${(v+2)*5}s`;return`
                <div class="absolute rounded-full pointer-events-none solution-orbit-trail ${u[v].size}" style="animation: spin ${u[v].duration} linear infinite; animation-delay: ${u[v].delay}">
                    <div class="absolute" style="top: 50%; left: 0%; transform: translate(-50%, -50%);">
                    <div class="w-20 h-20 md:w-24 md:h-24" style="animation: spin ${u[v].duration} linear infinite reverse; animation-delay: ${u[v].delay}">
                        <div class="relative flex items-center justify-center w-full h-full pointer-events-none">
                        <div class="relative z-10 grid place-items-center w-16 h-16 p-1 text-center ${w.text} ${w.bg} border-2 ${w.border} rounded-full shadow-lg md:w-20 md:h-20 ${w.shadow}">
                            <div class="z-10 flex flex-col items-center justify-center col-start-1 row-start-1 pointer-events-none">
                            <span class="text-lg font-bold leading-tight md:text-xl">${v+1}</span>
                            <span class="mt-1 text-[10px] uppercase tracking-wider md:text-xs">${c[v]}</span>
                            </div>
                            <div class="absolute col-start-1 row-start-1 w-32 h-32 md:w-40 md:h-40 border border-dashed border-cyan-500/30 rounded-full pointer-events-none" style="animation: spin ${_} linear infinite">
                            <button class="solution-satellite absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 p-1 text-cyan-300 transition-transform duration-300 cursor-pointer pointer-events-auto hover:scale-125 hover:text-cyan-100" style="animation: spin ${_} linear infinite reverse" data-index="${v}" aria-label="Explore solution for ${c[v]}">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-full h-full"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" /><path stroke-linecap="round" stroke-linejoin="round" d="m15.5 14-4-4m4-4-4 4" /></svg>
                            </button>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                `}).join("")}
            <div id="solution-grid-tooltips" class="absolute inset-0 z-30 grid grid-cols-1 md:grid-cols-2 grid-rows-4 md:grid-rows-2 gap-8 p-8 pointer-events-none invisible">
                ${n.map((g,v)=>`<div class="p-6 w-full max-w-xs md:max-w-md md:w-96 border rounded-xl shadow-2xl border-cyan-500/30 bg-black/80 backdrop-blur-md transition-all duration-500 ease-in-out pointer-events-auto opacity-0 scale-95 invisible translate-y-8 ${["md:justify-self-start md:self-start justify-self-center self-center","md:justify-self-end md:self-start justify-self-center self-center","md:justify-self-start md:self-end justify-self-center self-center","md:justify-self-end md:self-end justify-self-center self-center"][v]}">
                            <h3 class="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400 mb-4">${g.title}</h3>
                            <p class="text-sm text-gray-300 leading-relaxed whitespace-pre-line">${g.description}</p>
                            </div>`).join("")}
            </div>
            </div>
        </div>`,f=`
        <div class="animate-fade-in block md:hidden grid grid-cols-1 sm:grid-cols-2 gap-4">
            ${n.map((g,v)=>`
                <button class="p-6 text-left bg-black/30 border border-purple-500/20 rounded-lg shadow-lg hover:bg-black/50 hover:border-purple-500/50 transition-all duration-300" data-index="${v}">
                    <h3 class="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400 mb-2">${g.title}</h3>
                    <p class="text-sm text-gray-300 line-clamp-3">${g.description}</p>
                </button>
            `).join("")}
        </div>
    `;a.innerHTML=`<div>${p}${f}</div>`,a.querySelectorAll("[data-index]").forEach(g=>{g.addEventListener("click",v=>{v.stopPropagation();const w=parseInt(g.dataset.index);rc(n[w],e)})});let h=!1;const m=a.querySelector("#solution-sun"),y=a.querySelector("#solution-grid-tooltips"),b=y.querySelectorAll(":scope > div");m&&m.addEventListener("click",()=>{h=!h,y.classList.toggle("invisible",!h),b.forEach(g=>{g.classList.toggle("opacity-100",h),g.classList.toggle("scale-100",h),g.classList.toggle("visible",h),g.classList.toggle("translate-y-0",h),g.classList.toggle("opacity-0",!h),g.classList.toggle("scale-95",!h),g.classList.toggle("invisible",!h),g.classList.toggle("translate-y-8",!h)})})}function ac(t){const e=`
        <div class="relative w-full py-24 overflow-hidden">
            <div class="relative z-10 container mx-auto px-4 flex flex-col items-center">
            <div class="w-full max-w-6xl bg-[#0c0a1d]/80 border border-cyan-500/30 backdrop-blur-xl rounded-3xl p-8 md:p-12 shadow-2xl shadow-purple-500/10">
                <div class="flex flex-col md:flex-row gap-8 items-start mb-8">
                    <div class="flex flex-col gap-4 flex-shrink-0">
                    <h2 class="text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-400 tracking-tighter">UNOOSA</h2>
                    <p class="text-xl text-cyan-100 font-light tracking-widest uppercase">104 Countries</p>
                    <div class="flex items-center justify-center w-72 h-20 bg-white/5 border border-dashed border-cyan-500/30 rounded-xl overflow-hidden">
                        <img src="${tc}" alt="UNOOSA Logo" class="w-full h-full object-cover" />
                    </div>
                    </div>
                    <div class="flex-1 md:pl-8 md:border-l border-cyan-500/20 pt-2 text-base">
                    <ul class="space-y-4 text-gray-300">
                        <li class="flex gap-3"><span class="text-cyan-400 mt-1"></span><span><strong class="text-white">Use UNOOSA as the central platform for dialogue</strong> regarding AI regulations in space.</span></li>
                        <li class="flex gap-3">
                            <span class="text-cyan-400 mt-1"></span>
                            <div><span>All the major space-faring countries are already members of UNOOSA (ex. China, Russia, US, India, Japan) in which they already:</span>
                                <ul class="mt-2 ml-1 space-y-1 text-sm text-gray-400 border-l-2 border-cyan-500/20 pl-3">
                                    <li> Participate in shaping international space law</li>
                                    <li> Collaborate on peaceful uses of outer space</li>
                                    <li> Access capacity-building programs and technical support</li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                    </div>
                </div>
                <div class="w-full h-px bg-gradient-to-r from-transparent via-cyan-500/50 to-transparent mb-12"></div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center mb-12">
                <div class="p-6 border border-purple-500/30 bg-purple-900/10 rounded-2xl text-center lg:text-right shadow-[0_0_15px_rgba(168,85,247,0.1)]">
                    <h3 class="text-xl font-bold text-purple-200 mb-2">STRATEGY</h3>
                    <p class="text-lg text-white font-medium leading-relaxed">Soft laws + multilingual, multi-stakeholder outreach plan</p>
                </div>
                <div class="relative flex justify-center">
                    <div class="relative w-full max-w-[320px] aspect-[2/3] flex items-center justify-center">
                        <svg viewBox="0 0 300 450" class="absolute inset-0 w-full h-full overflow-visible drop-shadow-lg">
                            <defs>
                                <linearGradient id="parchmentGrad" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#FFF4E0" /><stop offset="15%" stop-color="#FFE0B2" /><stop offset="85%" stop-color="#FFE0B2" /><stop offset="100%" stop-color="#FFF4E0" /></linearGradient>
                                <linearGradient id="rollGrad" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#E6CCA0" /><stop offset="40%" stop-color="#FFE5B4" /><stop offset="100%" stop-color="#D4B485" /></linearGradient>
                            </defs>
                            <path d="M 45,60 Q 35,225 45,390 L 255,390 Q 265,225 255,60 Z" fill="url(#parchmentGrad)" stroke="#D7CCC8" stroke-width="0.5"/>
                            <g><rect x="20" y="30" width="260" height="35" rx="5" fill="url(#rollGrad)" stroke="#C1A476" stroke-width="1"/><path d="M 25,30 L 25,65" stroke="#A68B5B" stroke-width="1" stroke-opacity="0.5" /><path d="M 275,30 L 275,65" stroke="#A68B5B" stroke-width="1" stroke-opacity="0.5" /></g>
                            <g><rect x="20" y="385" width="260" height="35" rx="5" fill="url(#rollGrad)" stroke="#C1A476" stroke-width="1"/><path d="M 25,385 L 25,420" stroke="#A68B5B" stroke-width="1" stroke-opacity="0.5" /><path d="M 275,385 L 275,420" stroke="#A68B5B" stroke-width="1" stroke-opacity="0.5" /></g>
                            <path d="M 45,100 L 10,115 L 45,130 Z" fill="#C1A476" />
                            <path d="M 255,320 L 290,335 L 255,350 Z" fill="#C1A476" />
                        </svg>
                        <div class="relative z-10 px-10 py-16 text-center flex flex-col items-center justify-center h-full">
                            <h3 class="font-serif font-bold text-[#1A3C6D] text-3xl leading-tight mb-6 drop-shadow-sm">AI in Space</h3>
                            <p class="font-serif text-[#1A3C6D] text-xl leading-relaxed font-medium">A globally cooperative path towards a safer, more regulated AI future</p>
                        </div>
                    </div>
                </div>
                <div class="p-6 border border-cyan-500/30 bg-cyan-900/10 rounded-2xl text-center lg:text-left shadow-[0_0_15px_rgba(34,211,238,0.1)]">
                    <h3 class="text-xl font-bold text-cyan-200 mb-2">CORE PILLARS</h3>
                    <p class="text-lg text-white font-medium leading-relaxed">Centered on: <span class="text-cyan-300">trust</span>, <span class="text-cyan-300">transparency</span>, and <span class="text-cyan-300">shared responsibility</span> in AI space governance</p>
                </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                <div class="flex flex-col justify-center md:items-start">
                        <div class="bg-white/5 border-l-4 border-purple-500 p-6 rounded-r-xl">
                        <p class="text-lg text-gray-200 italic">Align with <strong class="text-white not-italic">Outer Space Treaty</strong> principles: <br/><span class="text-purple-300">peaceful use, benefit to all, and international cooperation.</span></p>
                        </div>
                </div>
                <div class="flex flex-col items-end">
                    <div class="text-right">
                        <h4 class="text-sm uppercase tracking-widest text-gray-400 mb-3">Target Groups for Framework</h4>
                        <div class="flex flex-wrap justify-end gap-2">
                            <span class="px-3 py-1 text-sm bg-cyan-500/10 border border-cyan-500/30 text-cyan-100 rounded-full">UN Bodies</span>
                            <span class="px-3 py-1 text-sm bg-cyan-500/10 border border-cyan-500/30 text-cyan-100 rounded-full">Regional Bodies</span>
                            <span class="px-3 py-1 text-sm bg-cyan-500/10 border border-cyan-500/30 text-cyan-100 rounded-full">National Agencies</span>
                            <span class="px-3 py-1 text-sm bg-cyan-500/10 border border-cyan-500/30 text-cyan-100 rounded-full">Private Sector</span>
                            <span class="px-3 py-1 text-sm bg-cyan-500/10 border border-cyan-500/30 text-cyan-100 rounded-full">Civilian Society</span>
                        </div>
                    </div>
                </div>
                </div>
                <div class="mt-12 pt-8 border-t border-white/10">
                <h4 class="text-center text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-cyan-400 mb-8 uppercase tracking-wide">Key Messages</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-base">
                    <div class="p-6 bg-black/40 rounded-xl border border-white/5 hover:border-cyan-500/30 transition-colors"><p class="text-gray-300 leading-relaxed">Lets make UNOOSA the centralized platform for regulations surrounding AI regulations.</p></div>
                    <div class="p-6 bg-black/40 rounded-xl border border-white/5 hover:border-cyan-500/30 transition-colors"><p class="text-gray-300 leading-relaxed">AI is transforming space so lets shape its level of decision-making together, to create a safer, more regulated AI future.</p></div>
                    <div class="p-6 bg-black/40 rounded-xl border border-white/5 hover:border-cyan-500/30 transition-colors"><p class="text-gray-300 leading-relaxed">Transparency, human oversight, and shared benefits are essential.</p></div>
                </div>
                </div>
            </div>
            </div>
        </div>
    `;t.innerHTML=e}function cc(t){const e=`
        <div class="relative w-full">
            <div class="w-full bg-[#0c0a1d]/80 border border-purple-500/30 backdrop-blur-md rounded-2xl p-8 shadow-xl shadow-purple-500/5">
            <h3 class="text-[24px] md:text-[28px] font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-cyan-300 mb-8">Implementation</h3>
            <div class="space-y-6 text-base">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="md:w-32 flex-shrink-0"><span class="font-bold text-cyan-300 uppercase tracking-wider text-sm md:text-base border-b border-cyan-500/30 pb-1">Collaborative</span></div>
                    <div class="flex-1 text-gray-300 leading-relaxed">Encourage regional coordination (EU, OECD, ESA) and involve major space agencies and private actors in codeveloping ethical AI norms. Ideally, have one set of soft laws first before expansion as a stepping stone, before introducing hard laws to avoid unaligned, fragmented standards.</div>
                </div>
                <div class="h-px w-full bg-white/5"></div>
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="md:w-32 flex-shrink-0"><span class="font-bold text-cyan-300 uppercase tracking-wider text-sm md:text-base border-b border-cyan-500/30 pb-1">Advocacy</span></div>
                    <div class="flex-1 text-gray-300 leading-relaxed">Advocate for inclusive access to AI tools and data, especially for developing countries.</div>
                </div>
                <div class="h-px w-full bg-white/5"></div>
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="md:w-32 flex-shrink-0"><span class="font-bold text-cyan-300 uppercase tracking-wider text-sm md:text-base border-b border-cyan-500/30 pb-1">Transparency</span></div>
                    <div class="flex-1 text-gray-300 leading-relaxed">Promote several Transparency and Confidence-Building Measures (TCBMs) to clarify intent and reduce misunderstandings, especially amongst the various players due to sensitive data.</div>
                </div>
                <div class="h-px w-full bg-white/5"></div>
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="md:w-32 flex-shrink-0"><span class="font-bold text-purple-300 uppercase tracking-wider text-sm md:text-base border-b border-purple-500/30 pb-1">TCBMs</span></div>
                    <div class="flex-1 text-gray-300 leading-relaxed">Voluntary practices that promote trust, reduce misunderstandings, and support peaceful cooperation in space activities so ex. data-sharing initiatives between agencies and private actors (ex. Copernicus open data programme).</div>
                </div>
            </div>
            </div>
        </div>
    `;t.innerHTML=e}function uc(t){const e=`
        <div class="relative w-full py-24 overflow-hidden">
            <div class="absolute inset-0 z-0 pointer-events-none">
                <div class="absolute bottom-[-300px] left-1/2 -translate-x-1/2 w-[150%] h-[600px] bg-[#003366] rounded-[50%] blur-[80px] opacity-80"></div>
                <div class="absolute bottom-[-280px] left-1/2 -translate-x-1/2 w-[120%] h-[500px] bg-[#0066cc] rounded-[50%] blur-[60px] opacity-60"></div>
                <div class="absolute bottom-[-250px] left-1/2 -translate-x-1/2 w-[100%] h-[400px] bg-[#4db8ff] rounded-[50%] blur-[50px] opacity-30"></div>
                <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/20"></div>
            </div>
            <div class="relative z-10 container mx-auto px-4">
                <div class="flex flex-col items-center mb-20">
                    <h2 class="text-4xl md:text-5xl font-bold text-white text-center tracking-tight drop-shadow-lg">Next Steps</h2>
                    <div class="w-48 h-1 bg-white mt-4 rounded-full shadow-[0_0_10px_rgba(255,255,255,0.8)]"></div>
                </div>
                <div class="flex flex-col items-center justify-center">
                    <div class="hidden xl:grid grid-cols-6 gap-y-0 gap-x-8 justify-items-center w-full max-w-7xl -space-y-12"> 
                            <div class="col-start-1 col-span-2"><div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><defs><linearGradient id="hexGradientBlue" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="rgba(34, 211, 238, 0.3)" /><stop offset="100%" stop-color="rgba(59, 130, 246, 0.4)" /></linearGradient><filter id="glow" x="-20%" y="-20%" width="140%" height="140%"><feGaussianBlur stdDeviation="1" result="blur" /><feComposite in="SourceGraphic" in2="blur" operator="over" /></filter></defs><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">UNOOSA Hub</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Keep UNOOSA as the central dialogue platform for AI regulation. Clarify the relevance and importance of their participation for maintaining a safer AI regulatory future for their nations.</div></div></div></div>
                            <div class="col-start-3 col-span-2"><div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Soft law launch</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Clear, flexible norms now to avoid future legal gaps. Soft laws can help us with directions to close legal gaps later as we obtain more input from our stakeholders: actors, nations and companies.</div></div></div></div>
                            <div class="col-start-5 col-span-2"><div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Multilingual translations</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Translate brief into multiple languages for accessibility and global reach.</div></div></div></div>
                            <div class="col-start-2 col-span-2 -mt-20"><div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Private Sector Advocacy</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Engage leading private space actors e.g., SpaceX, Blue Origin, Astroscale, Isar Aerospace in AI policy dialogues to mitigate downstream risks.</div></div></div></div>
                            <div class="col-start-4 col-span-2 -mt-20"><div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Channels</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md"><ul class="text-left list-disc pl-4 space-y-2 text-sm"><li>ESA and OECD policy forums (ex. ESAs AI4EO, UN-SPIDER)</li><li>Space law conferences</li><li>UNOOSA committee meetings</li></ul></div></div></div></div>
                    </div>
                    <div class="hidden md:flex xl:hidden flex-wrap justify-center gap-4 max-w-5xl">
                        <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">UNOOSA Hub</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Keep UNOOSA as the central dialogue platform for AI regulation. Clarify the relevance and importance of their participation for maintaining a safer AI regulatory future for their nations.</div></div></div>
                        <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Soft law launch</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Clear, flexible norms now to avoid future legal gaps. Soft laws can help us with directions to close legal gaps later as we obtain more input from our stakeholders: actors, nations and companies.</div></div></div>
                        <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Multilingual translations</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Translate brief into multiple languages for accessibility and global reach.</div></div></div>
                        <div class="flex justify-center gap-4 w-full -mt-16">
                            <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Private Sector Advocacy</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Engage leading private space actors e.g., SpaceX, Blue Origin, Astroscale, Isar Aerospace in AI policy dialogues to mitigate downstream risks.</div></div></div>
                            <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Channels</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md"><ul class="text-left list-disc pl-4 space-y-2 text-sm"><li>ESA and OECD policy forums (ex. ESAs AI4EO, UN-SPIDER)</li><li>Space law conferences</li><li>UNOOSA committee meetings</li></ul></div></div></div>
                        </div>
                    </div>
                    <div class="md:hidden flex flex-col items-center gap-8">
                        <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">UNOOSA Hub</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Keep UNOOSA as the central dialogue platform for AI regulation. Clarify the relevance and importance of their participation for maintaining a safer AI regulatory future for their nations.</div></div></div>
                        <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Private Sector Advocacy</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Engage leading private space actors e.g., SpaceX, Blue Origin, Astroscale, Isar Aerospace in AI policy dialogues to mitigate downstream risks.</div></div></div>
                        <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Soft law launch</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Clear, flexible norms now to avoid future legal gaps. Soft laws can help us with directions to close legal gaps later as we obtain more input from our stakeholders: actors, nations and companies.</div></div></div>
                        <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Channels</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md"><ul class="text-left list-disc pl-4 space-y-2 text-sm"><li>ESA and OECD policy forums (ex. ESAs AI4EO, UN-SPIDER)</li><li>Space law conferences</li><li>UNOOSA committee meetings</li></ul></div></div></div>
                        <div class="relative w-72 h-80 flex-shrink-0 group transition-transform hover:scale-105 duration-300"><svg class="absolute inset-0 w-full h-full drop-shadow-xl" viewBox="0 0 100 115" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><path d="M50 0 L100 28 L100 87 L50 115 L0 87 L0 28 Z" fill="url(#hexGradientBlue)" stroke="rgba(165, 243, 252, 0.6)" stroke-width="1.5" filter="url(#glow)" class="transition-all duration-300 group-hover:stroke-white group-hover:stroke-[2px] group-hover:fill-cyan-600/40"/></svg><div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10"><h3 class="text-lg font-bold text-white mb-3 uppercase tracking-wider border-b border-cyan-200/50 pb-1">Multilingual translations</h3><div class="text-sm text-white font-medium leading-relaxed drop-shadow-md">Translate brief into multiple languages for accessibility and global reach.</div></div></div>
                    </div>
                </div>
            </div>
        </div>
    `;t.innerHTML=e}function dc(t){const e=`
        <div class="container mx-auto px-4 max-w-4xl">
        <div id="references-toggle" role="button" tabindex="0" aria-expanded="false" class="flex items-center justify-center mb-8 cursor-pointer group">
            <h3 class="text-[24px] md:text-[28px] font-bold text-gray-500 uppercase tracking-[0.2em] group-hover:text-gray-300 transition-colors">References</h3>
            <svg id="references-chevron" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 ml-4 text-gray-500 group-hover:text-gray-300 transition-transform transform">
                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
        </div>
        <div id="references-content" class="collapsible-content">
            <div>
                <div class="h-96 custom-scrollbar overflow-y-auto pr-4">
                    <div class="text-gray-500 text-xs font-light leading-relaxed space-y-3">
                    <p>Ancient vector blank aged worn paper scroll with yellowed coloring and ragged torn edges | Free Vector. (n.d.). Freepik. Retrieved November 11, 2025, from https://www.freepik.com/free-vector/ancient-vector-blank-aged-worn-paper-scroll-with-yellowed-coloring-ragged-torn-edges_10700662.htm</p>
                    <p>Artificial intelligence in space. (n.d.). Retrieved November 11, 2025, from https://www.esa.int/Enabling_Support/Preparing_for_the_Future/Discovery_and_Preparation/Artificial_intelligence_in_space</p>
                    <p>Baruah, M., & Bhanu, A. P. (2025). Applicability of Artificial Intelligence in Space Activities. IJFMR - International Journal For Multidisciplinary Research, 7(3). https://doi.org/10.36948/ijfmr.2025.v07i03.43992</p>
                    <p>Bengio, Y., Hinton, G., Yao, A., Song, D., Abbeel, P., Darrell, T., Harari, Y. N., Zhang, Y.-Q., Xue, L., Shalev-Shwartz, S., Hadfield, G., Clune, J., Maharaj, T., Hutter, F., Baydin, A. G., McIlraith, S., Gao, Q., Acharya, A., Krueger, D.,  Mindermann, S. (2024). Managing extreme AI risks amid rapid progress. Science, 384(6698), 842845. https://doi.org/10.1126/science.adn0117</p>
                    <p>Bratu, I., Lodder, A., & Linden, T. van der. (2021). Autonomous Space Objects and International Space Law: Navigating the Liability Gap. Indonesian Journal of International Law, 18(3). https://doi.org/10.17304/ijil.vol18.3.818</p>
                    <p>Bratu, I., Lodder, A., & Van Der Linden, T. (2021). Autonomous Space Objects and International Space Law: Navigating the Liability Gap. Indonesian Journal of International Law, 18(3). https://doi.org/10.17304/ijil.vol18.3.818</p>
                    <p>Dantzler, D. (2025, November 10). United Nations Office for Outer Space Affairs soft law policy implementation, phrasing on regulations and next steps for inclusion of private actors [Personal communication].</p>
                    <p>Drapeau des tats-Unis. (2025). In Wikipdia. https://fr.wikipedia.org/w/index.php?title=Drapeau_des_%C3%89tats-Unis&oldid=229473670</p>
                    <p>Flag of China. (2025). In Wikipedia. https://en.wikipedia.org/w/index.php?title=Flag_of_China&oldid=1318444726</p>
                    <p>Flag of India. (2025). In Wikipedia. https://en.wikipedia.org/w/index.php?title=Flag_of_India&oldid=1321179428</p>
                    <p>Flag of Japan. (2025). In Wikipedia. https://en.wikipedia.org/w/index.php?title=Flag_of_Japan&oldid=1315443267</p>
                    <p>Flag of Russia. (2025). In Wikipedia. https://en.wikipedia.org/w/index.php?title=Flag_of_Russia&oldid=1316751805</p>
                    <p>Graham, T., Thangavel, K., & Martin, A.-S. (2024). Navigating AI-lien Terrain: Legal liability for artificial intelligence in outer space. Acta Astronautica, 217, 197207. https://doi.org/10.1016/j.actaastro.2024.01.039</p>
                    <p>Li, A. S. (2025). Autonomizing Outer Space: Updating the Liability Convention for the Rise of Artificial Intelligence (AI). UC Irvine Law Review, 15(1). https://escholarship.org/uc/item/4n97x3hs</p>
                    <p>Marboe, I. (2014, November 20). Space Law Treaties and Soft Law Development. https://www.unoosa.org/documents/pdf/spacelaw/activities/2014/pres02E.pdf</p>
                    <p>Martin, A. S., & Freeland, S. R. (2020). Artificial Intelligence  A Challenging Realm for Regulating Space Activities. Annals of Air and Space Law, XLV, 275306.</p>
                    <p>Martin, A.-S., & Freeland, S. (2021). The Advent of Artificial Intelligence in Space Activities: New Legal Challenges. Space Policy, 55, 101408. https://doi.org/10.1016/j.spacepol.2020.101408</p>
                    <p>Oche, P. A., Ewa, G. A., & Ibekwe, N. (2024). Applications and Challenges of Artificial Intelligence in Space Missions. IEEE Access, 12, 4448144509. https://doi.org/10.1109/ACCESS.2021.3132500</p>
                    <p>Outer Space Treaty. (n.d.). Retrieved November 11, 2025, from https://www.unoosa.org/oosa/en/ourwork/spacelaw/treaties/outerspacetreaty.html</p>
                    <p>Pagallo, U., Bassi, E., & Durante, M. (2023). The Normative Challenges of AI in Outer Space: Law, Ethics, and the Realignment of Terrestrial Standards. Philosophy & Technology, 36(2), 23. https://doi.org/10.1007/s13347-023-00626-7</p>
                    <p>Responses to the set of questions provided by the Moderator and Vice  Moderator of the Scheduled Informal Consultations on Space Resources. (2021). United Nations Office for Outer Space Affairs Committee on the Peaceful Uses of Outer Space. https://www.unoosa.org/documents/doc/copuos/space-resources/60_LSC-CRP08-Responses-of-States-on-Space-Resources-27-May-2021-MNr1.docx</p>
                    <p>Thangavel, K., Sabatini, R., Gardi, A., Ranasinghe, K., Hilton, S., Servidia, P., & Spiller, D. (2024). Artificial Intelligence for Trusted Autonomous Satellite Operations. Progress in Aerospace Sciences, 144, 100960. https://doi.org/10.1016/j.paerosci.2023.100960</p>
                    <p>Urban, J. A. (2016). Soft Law: The Key to Security in a Globalized Outer Space. SSRN Electronic Journal. https://doi.org/10.2139/ssrn.2718328</p>
                    <p>Weber, A., & Franke, P. (2024). Space-Domain AI Applications need Rigorous Security Risk Analysis. Proceedings 2024 Workshop on Security of Space and Satellite Systems. Workshop on Security of Space and Satellite Systems, San Diego, CA, USA. https://doi.org/10.14722/spacesec.2024.23008</p>
                    <p>Yazici, T. (Working G. C., Martin, A.-S., Wood, S., Almenar, R., Kucher, L., Zielinski, L. Y., Wedenig, S.-M., & Tricco, G. (2024). Balancing Innovation and Responsibility: International Recommendations for AI Regulation in Space. International Institute of Space Law (IISL).</p>
                    </div>
                </div>
            </div>
        </div>
        </div>
    `;t.innerHTML=e;const n=document.getElementById("references-toggle"),o=document.getElementById("references-content"),s=document.getElementById("references-chevron");n&&o&&s&&n.addEventListener("click",()=>{const l=o.classList.toggle("expanded");n.setAttribute("aria-expanded",String(l)),s.classList.toggle("rotate-180")})}async function pc(){const t=document.getElementById("loading-spinner"),e=document.getElementById("error-message-container"),n=document.getElementById("main-content-container"),o=document.getElementById("bottom-content-container"),s=document.getElementById("problem-content-container"),l=document.getElementById("explore-risks-btn"),a=document.getElementById("modal-root"),c=document.getElementById("gaps-diagram-section-container"),d=document.getElementById("solution-solar-system-section-container"),u=document.getElementById("policy-framework-section-container"),p=document.getElementById("implementation-section-container"),f=document.getElementById("next-steps-section-container"),h=document.getElementById("references-section-container");console.log("DOM Elements loaded:",{exploreRisksBtn:!!l,problemContentContainer:!!s,modalRoot:!!a});let m=!1;l&&s?l.addEventListener("click",()=>{console.log("Explore Risks button clicked"),m=!m,console.log("isRisksExplored:",m),s.classList.toggle("expanded",m),l.textContent=m?"Hide Risks":"Explore Risks",l.classList.toggle("animate-pulse-bounce",!m),console.log("Classes on problem container:",s.className)}):console.error("Failed to initialize: Explore Risks button or problem content container not found",{exploreRisksBtn:l,problemContentContainer:s}),Xa("animated-background"),Qa("problem-content-container",kn);let y=null,b=null;try{y=await Pn()}catch(g){b=g instanceof Error?g.message:"An unknown error occurred. Displaying default poster content.",console.error("Failed to fetch from Gemini, using fallback. Error:",g),y=(await Ln(async()=>{const{fallbackContent:v}=await Promise.resolve().then(()=>Za);return{fallbackContent:v}})).fallbackContent}finally{if(y&&y.solutions){const g=y.solutions;g.length>0&&(g[0]={title:"Adaptive Governance Framework",description:` Developing responsible AI for autonomous space systems requires integrating ethical governance with secure technical design.
 As autonomy increases, exemplified by systems like lethal autonomous weapons already used in the military, questions of accountability, transparency, and compliance with international law become critical.`}),g.length>1&&(g[1]={title:"Tech Diplomacy & Standards",description:` AI and sensing technologies are often multi-use, export control frameworks such as the Wassenaar Arrangement and US/EU transfer controls must guide system design to prevent misuse.
 Ongoing policy initiatives, including the EU AI Act, OECD Responsible AI guidelines, IEEE procurement standards, and U.S. federal acquisition rules further emphasize transparency, risk management, and clarity of liability in automated decision systems.`}),g.length>2&&(g[2]={title:"Meaningful Human Control",description:` Incorporate clearly defined decision thresholds and human control oversight, with regulatory reviews triggered when autonomous performance exceeds previously defined limits.
 Technical safeguards must be equally robust with end-to-end encryption, authenticated command pathways, tampering resistant logging, and layered access controls to protect mission data and ensure traceability of decisions.`}),g.length>3&&(g[3]={title:"Binding Legal Frameworks",description:` Within space law, the Outer Space Treaty and GDPR principles reinforce state responsibility, data minimization, and continuous supervision of private actors.
 Together, these legal and technical measures establish a secure, accountable, and ethically grounded framework for deploying AI in space while maintaining meaningful human oversight.`})}}t.classList.add("hidden"),b&&(e.textContent=b,e.classList.remove("hidden")),y&&(n.classList.remove("hidden"),o.classList.remove("hidden"),oc(c,a,y.gapTopics),lc(d,a,y.solutions),ac(u),cc(p),uc(f),dc(h))}document.addEventListener("DOMContentLoaded",pc);
